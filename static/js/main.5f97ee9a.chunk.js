(this["webpackJsonpasmrdb-frontend"]=this["webpackJsonpasmrdb-frontend"]||[]).push([[0],{38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),s=a(22),l=a.n(s),i=a(3),r=a(5),o=a(4),d=a(1);var j=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(""),j=Object(i.a)(l,2),b=j[0],u=j[1],m=Object(n.useState)(!1),h=Object(i.a)(m,2),O=h[0],p=h[1];return Object(n.useEffect)((function(){document.title="ASMRdb"}),[]),Object(d.jsxs)("div",{className:"container",children:[!0===e.loggedIn?Object(d.jsx)(r.c,{push:!0,to:"/"}):null,Object(d.jsx)("div",{className:"row justify-content-center",children:Object(d.jsxs)("div",{className:"col-12 col-lg-6  bg-light p-4",children:[Object(d.jsx)("h1",{className:"text-center",children:"Login"}),Object(d.jsxs)("form",{onSubmit:function(t){""!==e.apiURL&&(t.preventDefault(),fetch(e.apiURL+"/user/login",{method:"POST",body:JSON.stringify({email:c,password:b}),headers:{"Content-Type":"application/json"},mode:"cors"}).then((function(e){if(200===e.status)return e.json();p(!0)})).then((function(t){t&&(localStorage.setItem("token",t.token),localStorage.setItem("id",t.id),e.setLogin(!0))})))},children:[Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),Object(d.jsx)("input",{type:"email",className:"form-control",id:"email",onChange:function(e){return s(e.target.value)}})]}),Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),Object(d.jsx)("input",{type:"password",className:"form-control",id:"password",onChange:function(e){return u(e.target.value)}})]}),Object(d.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"}),!0===O?Object(d.jsx)("p",{className:"text-center text-danger",children:"Email or password was incorrect. Please try again."}):null]}),Object(d.jsx)("hr",{}),Object(d.jsx)("div",{className:"text-center",children:Object(d.jsx)(o.Link,{to:"/register",children:"Create an Account"})})]})})]})},b=a(15),u=a(11),m=a(24),h=a(17),O=a(10);var p=function(e){var t=Object(r.m)().id,a=Object(n.useState)(""),c=Object(i.a)(a,2),s=c[0],l=c[1],j=Object(n.useState)(),p=Object(i.a)(j,2),x=p[0],f=p[1],g=Object(n.useState)(""),v=Object(i.a)(g,2),N=v[0],y=v[1],S=Object(n.useState)([]),L=Object(i.a)(S,2),w=L[0],R=L[1],C=Object(n.useState)(0),k=Object(i.a)(C,2),T=k[0],U=k[1],I=Object(n.useState)(0),E=Object(i.a)(I,2),A=E[0],_=E[1],F=Object(n.useState)([]),D=Object(i.a)(F,2),M=D[0],z=D[1],P=Object(n.useState)(),B=Object(i.a)(P,2),q=B[0],G=B[1],J=Object(n.useState)(),H=Object(i.a)(J,2),V=H[0],Y=H[1],K=Object(n.useState)([]),W=Object(i.a)(K,2),Z=W[0],Q=W[1],X=Object(n.useState)([]),$=Object(i.a)(X,2),ee=$[0],te=$[1],ae=Object(n.useState)(),ne=Object(i.a)(ae,2),ce=ne[0],se=ne[1],le=Object(n.useState)(),ie=Object(i.a)(le,2),re=ie[0],oe=ie[1],de=Object(n.useState)(!1),je=Object(i.a)(de,2),be=je[0],ue=je[1],me=Object(n.useState)([]),he=Object(i.a)(me,2),Oe=he[0],pe=he[1],xe=Object(n.useState)([]),fe=Object(i.a)(xe,2),ge=fe[0],ve=fe[1],Ne=Object(n.useState)(),ye=Object(i.a)(Ne,2),Se=ye[0],Le=ye[1],we=Object(n.useState)(),Re=Object(i.a)(we,2),Ce=Re[0],ke=Re[1],Te=Object(n.useState)(),Ue=Object(i.a)(Te,2),Ie=Ue[0],Ee=Ue[1],Ae=Object(n.useState)(),_e=Object(i.a)(Ae,2),Fe=_e[0],De=_e[1],Me=Object(n.useState)(),ze=Object(i.a)(Me,2),Pe=ze[0],Be=ze[1],qe=function(){""!==e.apiURL&&fetch(e.apiURL+"/comment/"+t,{method:"GET",mode:"cors"}).then((function(e){if(200===e.status)return e.json()})).then((function(e){R(e.comments)}))};return Object(n.useEffect)((function(){null!==localStorage.getItem("token")&&l(localStorage.getItem("token")),null!==localStorage.getItem("id")&&G(localStorage.getItem("id"))}),[]),Object(n.useEffect)((function(){""!==e.apiURL&&fetch(e.apiURL+"/channel/"+t+"/all",{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(e){document.title=e.channel.name,f(e.channel),Le(e.channel.status),ke(e.channel.twitter),Ee(e.channel.niconico),De(e.channel.aliases);for(var t=e.ratings,a=0,n=[0,0,0,0,0,0,0,0,0,0,0],c=0;c<t.length;c++)a+=t[c].rating,n[t[c].rating]++;t.sort((function(e,t){return O.DateTime.fromISO(t.date).toMillis()-O.DateTime.fromISO(e.date).toMillis()})),t.length>10?Q(t.slice(0,10)):Q(t),z(n),t.length>0&&U(a/t.length),_(t.length),R(e.comments),pe(e.allTags),ve(e.channel.tags)}))}),[e.apiURL,t,q,be,e.loggedIn]),Object(n.useEffect)((function(){}),[x]),Object(n.useEffect)((function(){if("undefined"!==typeof q&&Z.length>0)for(var e=0;e<Z.length;e++)if(Z[e].raterid._id===q){Y(Z[e]);break}}),[q,Z]),Object(d.jsxs)("div",{className:"container",children:[Object(d.jsxs)("div",{className:"row bg-light",children:[Object(d.jsx)("div",{className:"col-12 col-lg-3 p-2",children:"undefined"===typeof x?null:Object(d.jsx)("img",{src:x.imageurl,alt:x.name,className:"h-100 w-100 rounded-circle text-center"})}),Object(d.jsxs)("div",{className:"bg-light col-12 col-lg-8 p-3",style:{backgroundColor:"green"},children:["undefined"===typeof x?Object(d.jsx)("div",{className:"spinner-border text-success",role:"status",children:Object(d.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:x.name}),"undefined"!==typeof x.aliases&&x.aliases!==x.name&&""!==x.aliases?Object(d.jsxs)("p",{className:"fs-4",children:["Also Known As: ",x.aliases]}):null,Object(d.jsxs)("p",{children:["Status: ",x.status]}),"undefined"===typeof x?null:Object(d.jsxs)("div",{children:[Object(d.jsxs)("p",{children:["# Channel Views: ",x.viewcount]}),Object(d.jsxs)("p",{children:["# Uploaded Videos: ",x.videocount]})]}),Object(d.jsxs)("div",{className:"socials",children:["undefined"!==typeof x&&"undefined"!==typeof x.twitter&&""!==x.twitter?Object(d.jsx)("a",{href:"https://twitter.com/"+x.twitter,target:"_blank",rel:"noopener noreferrer",children:Object(d.jsx)(u.c,{size:"2em"})}):null,"undefined"!==typeof x&&"undefined"!==typeof x.niconico&&""!==x.niconico?Object(d.jsx)("a",{href:"https://ch.nicovideo.jp/"+x.niconico,target:"_blank",rel:"noopener noreferrer",children:Object(d.jsx)(m.a,{size:"2em",color:"gray"})}):null,Object(d.jsx)("a",{href:"https://www.youtube.com/channel/"+x.youtube,target:"_blank",rel:"noopener noreferrer",children:Object(d.jsx)(u.d,{color:"red",size:"2em"})})]})]}),Object(d.jsx)("hr",{}),!0===e.loggedIn?Object(d.jsx)("button",{type:"button",className:"btn btn-success","data-bs-toggle":"modal","data-bs-target":"#editForm",children:"Edit Channel Info"}):null,Object(d.jsx)("button",{type:"button",className:"btn btn-success mx-3",onClick:function(a){return function(a){a.preventDefault(),""!==e.apiURL&&fetch(e.apiURL+"/channel/"+t+"/refresh",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+s},mode:"cors"}).then((function(e){200===e.status?ue(!be):Be("This channel has already been refreshed in the last 24 hours.")}))}(a)},children:"Refresh YouTube Stats"}),"undefined"!==typeof Pe&&""!==Pe?Object(d.jsx)("p",{className:"mt-3",style:{color:"red",marginBottom:"0"},children:Pe}):null]})]}),Object(d.jsx)("div",{className:"row mt-3",children:Object(d.jsx)("div",{className:"bg-light col-12  p-3",style:{backgroundColor:"green"},children:Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{className:"fs-2 text-center",children:"Tags"}),Object(d.jsx)("hr",{}),Oe.length>0?Object(d.jsxs)("form",{className:"mt-3 mb-3",onSubmit:function(a){return function(a){if(a.preventDefault(),""!==e.apiURL){for(var n=0,c=document.getElementById("tag").value,l=0;l<Oe.length;l++)Oe[l].name===c&&(n=Oe[l]._id);0!==n&&fetch(e.apiURL+"/channel/"+t+"/tag",{method:"POST",body:JSON.stringify({tagid:n}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s},mode:"cors"}).then((function(e){ue(!be)}))}}(a)},children:[Object(d.jsx)("label",{htmlFor:"tag"}),Object(d.jsx)("input",{list:"tags",name:"tag",id:"tag"}),Object(d.jsx)("datalist",{id:"tags",children:Oe.map((function(e,t){return Object(d.jsx)("option",{"data-tag-id":e._id,value:e.name},e._id)}))}),Object(d.jsx)("button",{type:"submit",className:"btn btn-success",children:"Add Tag"})]}):null,ge.length>0?ge.map((function(a,n){return Object(d.jsxs)("span",{className:"",children:[Object(d.jsx)(o.Link,{to:"/tag/"+a._id+"/1",children:a.tagname}),!0===e.loggedIn?Object(d.jsx)(h.a,{color:"red",size:"1.5em",cursor:"pointer",onClick:function(n){return function(a,n){a.preventDefault(),""!==e.apiURL&&fetch(e.apiURL+"/channel/"+t+"/tag",{method:"DELETE",body:JSON.stringify({tagid:n}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s},mode:"cors"}).then((function(e){ue(!be)}))}(n,a._id)}},a._id):n+1!==ge.length?Object(d.jsx)("span",{children:", "},a._id):null]},a._id)})):null]})})}),Object(d.jsxs)("div",{className:"row mt-3 bg-light",style:{minHeight:"25vh"},children:[Object(d.jsx)("p",{className:"text-center pt-3 fs-3 mb-0",children:"Statistics"}),Object(d.jsx)("hr",{}),Object(d.jsxs)("div",{className:"col-12 col-lg-6 p-3",children:[M.length>0?Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{className:"text-center",children:"Ratings"}),M.map((function(e,t){return Object(d.jsx)("div",{children:Object(d.jsxs)("div",{className:"progress mt-3",style:{height:"1.7em"},children:[Object(d.jsxs)("p",{children:[t,":"]}),Object(d.jsx)("div",{className:"progress-bar",role:"progressbar",style:{width:"".concat(e/Math.max.apply(Math,Object(b.a)(M))*100,"%")},"aria-valuenow":e,"aria-valuemin":"0","aria-valuemax":Math.max.apply(Math,Object(b.a)(M)),children:e})]})},"review-count-".concat(t))}))]}):null,Object(d.jsx)("hr",{}),Object(d.jsxs)("div",{className:"text-center",children:[Object(d.jsxs)("p",{className:"mt-3",children:["Average Rating: ",10===T?T:T.toFixed(1),"/10 (votes: ",A,")"]}),Object(d.jsxs)("p",{children:["Your Rating: ","undefined"===typeof V||-1===V?"-":Object(d.jsxs)("span",{children:[V.rating,Object(d.jsx)(h.a,{cursor:"pointer",color:"red",size:"1.5em",onClick:function(){""!==e.apiURL&&fetch(e.apiURL+"/channelrating/"+t,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+s},mode:"cors"}).then((function(e){200===e.status&&(ue(!be),Array.from(document.querySelectorAll("input")).forEach((function(e){return e.value=""})),Array.from(document.querySelectorAll("textarea")).forEach((function(e){return e.value=""})),Y(-1))}))}})]})]}),Object(d.jsx)("button",{type:"button",className:"btn btn-success","data-bs-toggle":"modal","data-bs-target":"#reviewForm",children:"undefined"===typeof V||-1===V?"Add Review":"Edit Review"})]})]}),Object(d.jsxs)("div",{className:"col-12 col-lg-6 d-flex flex-column align-items-center p-3",children:[Object(d.jsx)("p",{children:"Recent Reviews"}),Z.length>0?Z.map((function(e,t){return Object(d.jsxs)("p",{style:{cursor:"pointer",color:"blue"},"data-bs-toggle":"modal","data-bs-target":"#reviewShow",onClick:function(){return te([e.review,e.rating,e.raterid.username])},children:[e.raterid.username," ",e.rating,"/10 - ",O.DateTime.fromISO(e.date).toFormat("yyyy LLL dd")]},"latest-reviews-".concat(t))})):Object(d.jsx)("p",{children:"None"})]})]}),Object(d.jsx)("div",{className:"modal fade",id:"reviewShow",tabIndex:"-1","aria-labelledby":"reviewShowLabel","aria-hidden":"true",children:Object(d.jsx)("div",{className:"modal-dialog",children:Object(d.jsxs)("div",{className:"modal-content",children:[Object(d.jsxs)("div",{className:"modal-header",children:[Object(d.jsxs)("h5",{className:"modal-title",id:"reviewShowLabel",children:[ee[2],"'s review ",Object(d.jsx)("br",{}),ee[1],"/10"]}),Object(d.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(d.jsx)("div",{className:"modal-body",children:Object(d.jsx)("p",{children:"undefined"!==typeof ee[0]?ee[0]:"User did not write a review."})}),Object(d.jsx)("div",{className:"modal-footer",children:Object(d.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})})]})})}),Object(d.jsx)("div",{className:"modal fade",id:"reviewForm",tabIndex:"-1","aria-labelledby":"reviewFormLabel","aria-hidden":"true",children:Object(d.jsx)("div",{className:"modal-dialog",children:Object(d.jsxs)("div",{className:"modal-content",children:[Object(d.jsxs)("div",{className:"modal-header",children:[Object(d.jsx)("h5",{className:"modal-title",id:"reviewFormLabel",children:"Review"}),Object(d.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(d.jsx)("div",{className:"modal-body",children:Object(d.jsxs)("form",{onSubmit:function(a){return function(a){a.preventDefault();var n=0,c=" ";"undefined"===typeof ce?"undefined"!==typeof V&&(n=V.rating):n=ce,"undefined"===typeof re?"undefined"!==typeof V&&(c=V.review):c=re,fetch(e.apiURL+"/channelrating/"+t,{method:"POST",body:JSON.stringify({rating:n,review:c}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s},mode:"cors"}).then((function(e){200===e.status&&ue(!be)}))}(a)},children:[Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)("label",{htmlFor:"reviewRating",className:"form-label",children:"Rating"}),Object(d.jsxs)("div",{className:"input-group",children:["undefined"===typeof V?Object(d.jsx)("input",{type:"number",className:"form-control",id:"reviewRating",required:!0,onChange:function(e){return se(e.target.value)},placeholder:"0-10",min:"0",max:"10"}):Object(d.jsx)("input",{type:"number",className:"form-control",id:"reviewRating",required:!0,onChange:function(e){return se(e.target.value)},placeholder:"7",defaultValue:V.rating,min:"0",max:"10"}),Object(d.jsx)("span",{className:"input-group-text",id:"basic-addon2",children:"/10"})]})]}),Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)("label",{htmlFor:"reviewText",className:"form-label",children:"Review"}),"undefined"===typeof V?Object(d.jsx)("textarea",{className:"form-control",id:"reviewText",onChange:function(e){return oe(e.target.value)},rows:"3",placeholder:"optional",maxLength:"1000"}):Object(d.jsx)("textarea",{className:"form-control",id:"reviewText",onChange:function(e){return oe(e.target.value)},rows:"3",placeholder:"optional",defaultValue:V.review,maxLength:"1000"})]}),Object(d.jsx)("button",{type:"submit",className:"btn btn-primary mt-3 float-end",children:"Post Review"})]})}),Object(d.jsx)("div",{className:"modal-footer",children:Object(d.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})})]})})}),Object(d.jsx)("div",{className:"modal fade",id:"editForm",tabIndex:"-1","aria-labelledby":"editFormLabel","aria-hidden":"true",children:Object(d.jsx)("div",{className:"modal-dialog",children:Object(d.jsxs)("div",{className:"modal-content",children:[Object(d.jsxs)("div",{className:"modal-header",children:[Object(d.jsx)("h5",{className:"modal-title",id:"reviewFormLabel",children:"Info"}),Object(d.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(d.jsx)("div",{className:"modal-body",children:Object(d.jsxs)("form",{onSubmit:function(a){return function(a){a.preventDefault(),""!==e.apiURL&&fetch(e.apiURL+"/channel/"+t,{method:"PUT",body:JSON.stringify({status:Se,niconico:Ie,twitter:Ce,aliases:Fe}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s},mode:"cors"}).then((function(e){return ue(!be)}))}(a)},children:[Object(d.jsx)("label",{htmlFor:"status",children:"YouTube Status:"}),Object(d.jsxs)("select",{className:"form-select","aria-label":"Activity Select",required:!0,id:"status",value:Se,onChange:function(e){return Le(e.target.value)},children:[Object(d.jsx)("option",{value:"Active",children:"Active"}),Object(d.jsx)("option",{value:"Inactive",children:"Inactive"}),Object(d.jsx)("option",{value:"Unknown",children:"Unknown"})]}),Object(d.jsx)("label",{htmlFor:"twitter",className:"form-label",children:"Twitter:"}),Object(d.jsxs)("div",{className:"input-group mb-3",children:[Object(d.jsx)("span",{className:"input-group-text",id:"basic-addon3",children:"@"}),"undefined"!==typeof Ce?Object(d.jsx)("input",{type:"text",className:"form-control",id:"twitter","aria-describedby":"basic-addon3",defaultValue:Ce,onChange:function(e){return ke(e.target.value)}}):Object(d.jsx)("input",{type:"text",className:"form-control",id:"twitter","aria-describedby":"basic-addon3",onChange:function(e){return ke(e.target.value)}})]}),Object(d.jsx)("label",{htmlFor:"nnd",className:"form-label",children:"Niconico:"}),Object(d.jsxs)("div",{className:"input-group mb-3",children:[Object(d.jsx)("span",{className:"input-group-text",id:"basic-addon3",children:"https://ch.nicovideo.jp/"}),"undefined"!==typeof Ie?Object(d.jsx)("input",{type:"text",className:"form-control",id:"nnd","aria-describedby":"basic-addon3",defaultValue:Ie,onChange:function(e){return Ee(e.target.value)}}):Object(d.jsx)("input",{type:"text",className:"form-control",id:"nnd","aria-describedby":"basic-addon3",onChange:function(e){return Ee(e.target.value)}})]}),Object(d.jsx)("label",{htmlFor:"alias",className:"form-label",children:"Aliases:"}),"undefined"!==typeof Fe?Object(d.jsx)("textarea",{className:"form-control",id:"alias",rows:"3",defaultValue:Fe,onChange:function(e){return De(e.target.value)}}):Object(d.jsx)("textarea",{className:"form-control",id:"alias",rows:"3",onChange:function(e){return De(e.target.value)}}),Object(d.jsx)("button",{type:"submit",className:"btn btn-primary mt-3 float-end",children:"Submit Changes"})]})}),Object(d.jsx)("div",{className:"modal-footer",children:Object(d.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})})]})})}),Object(d.jsx)("div",{className:"row mt-3 mb-3",children:Object(d.jsxs)("div",{className:"col-12 bg-light",style:{backgroundColor:"green"},children:[Object(d.jsxs)("form",{onSubmit:function(a){a.preventDefault(),""!==e.apiURL&&fetch(e.apiURL+"/comment",{method:"POST",body:JSON.stringify({channelid:t,comment:N}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s},mode:"cors"}).then((function(e){200===e.status&&qe()}))},children:[Object(d.jsx)("label",{htmlFor:"comment-form",className:"form-label mt-3",children:"Add a comment"}),Object(d.jsx)("textarea",{className:"form-control mb-3",id:"comment-form",rows:"3",onChange:function(e){return y(e.target.value)}}),Object(d.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]}),Object(d.jsx)("hr",{}),Object(d.jsx)("p",{className:"fs-2 text-center",children:"Comments"}),Object(d.jsx)("div",{className:"comment-area",children:"undefined"!==typeof w&&w.length>0?w.map((function(t,a){return Object(d.jsxs)("div",{children:[Object(d.jsxs)("p",{className:"fs-2 fw-bold",children:[t.authorid.username,Object(d.jsxs)("span",{className:"fs-5 fw-normal",children:[" ",O.DateTime.fromISO(t.date).toFormat("yyyy LLL dd")]}),"undefined"!==typeof q&&t.authorid._id===q?Object(d.jsx)(h.a,{color:"red",cursor:"pointer",size:"1.3em",style:{float:"right"},onClick:function(){return function(t,a){""!==e.apiURL&&fetch(e.apiURL+"/comment",{method:"DELETE",body:JSON.stringify({authorid:a,commentid:t}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+s},mode:"cors"}).then((function(e){200===e.status&&qe()}))}(t._id,t.authorid._id)}}):null]}),Object(d.jsx)("p",{className:"fs-5",style:{whiteSpace:"pre-wrap"},children:t.comment}),a!==w.length-1?Object(d.jsx)("hr",{}):null]},t.authorid._id+a)})):Object(d.jsx)("p",{children:"No comments"})})]})})]})},x=function(e){var t=Object(n.useState)("Active"),a=Object(i.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(""),o=Object(i.a)(l,2),j=o[0],b=o[1],u=Object(n.useState)(),m=Object(i.a)(u,2),h=m[0],O=m[1],p=Object(n.useState)(),x=Object(i.a)(p,2),f=x[0],g=x[1],v=Object(n.useState)(!1),N=Object(i.a)(v,2),y=N[0],S=N[1],L=Object(n.useState)(""),w=Object(i.a)(L,2),R=w[0],C=w[1],k=Object(n.useState)(""),T=Object(i.a)(k,2),U=T[0],I=T[1],E=Object(n.useState)(!1),A=Object(i.a)(E,2),_=A[0],F=A[1];return Object(n.useEffect)((function(){document.title="Channel Form | ASMRdb",null!==localStorage.getItem("token")&&I(localStorage.getItem("token"))}),[]),Object(n.useEffect)((function(){""!==R&&S(!0)}),[R]),Object(d.jsxs)("div",{className:"container",children:[!0!==e.loggedIn?Object(d.jsx)(r.c,{to:"/login"}):null,!0===y?Object(d.jsx)(r.c,{to:R}):null,Object(d.jsx)("div",{className:"row d-flex justify-content-center mb-3",children:Object(d.jsxs)("div",{className:"col-12 col-lg-6 bg-light p-2",children:[Object(d.jsx)("h1",{className:"text-center",children:"Channel Form"}),Object(d.jsxs)("form",{onSubmit:function(t){return function(t){t.preventDefault(),""!==e.apiURL&&""!==U&&fetch(e.apiURL+"/channel",{method:"POST",mode:"cors",body:JSON.stringify({status:c,niconico:j,youtube:h,twitter:f}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+U}}).then((function(e){if(400!==e.status)return e.json();F(!0)})).then((function(e){"undefined"!==typeof e&&C("/channel/"+e.channelid[0]._id)}))}(t)},children:[Object(d.jsx)("label",{htmlFor:"youtube-url",className:"form-label",children:"YouTube URL"}),Object(d.jsxs)("div",{className:"input-group mb-3",children:[Object(d.jsx)("span",{className:"input-group-text",id:"basic-addon3",children:"https://www.youtube.com/channel/"}),Object(d.jsx)("input",{type:"text",required:!0,className:"form-control",id:"youtube-url","aria-describedby":"basic-addon3",onChange:function(e){return O(e.target.value)}})]}),Object(d.jsx)("label",{htmlFor:"status",children:"YouTube Status:"}),Object(d.jsxs)("select",{className:"form-select","aria-label":"Activity Select",required:!0,id:"status",onChange:function(e){return s(e.target.value)},children:[Object(d.jsx)("option",{value:"Active",children:"Active"}),Object(d.jsx)("option",{value:"Inactive",children:"Inactive"}),Object(d.jsx)("option",{value:"Unknown",children:"Unknown"})]}),Object(d.jsx)("hr",{}),Object(d.jsx)("p",{children:"Optional Socials:"}),Object(d.jsx)("label",{htmlFor:"twitter",className:"form-label",children:"Twitter:"}),Object(d.jsxs)("div",{className:"input-group mb-3",children:[Object(d.jsx)("span",{className:"input-group-text",id:"basic-addon3",children:"@"}),Object(d.jsx)("input",{type:"text",className:"form-control",id:"twitter","aria-describedby":"basic-addon3",onChange:function(e){return g(e.target.value)}})]}),Object(d.jsx)("label",{htmlFor:"nnd",className:"form-label",children:"Niconico:"}),Object(d.jsxs)("div",{className:"input-group mb-3",children:[Object(d.jsx)("span",{className:"input-group-text",id:"basic-addon3",children:"https://ch.nicovideo.jp/"}),Object(d.jsx)("input",{type:"text",className:"form-control",id:"nnd","aria-describedby":"basic-addon3",onChange:function(e){return b(e.target.value)}})]}),Object(d.jsx)("button",{type:"submit",className:"btn btn-success mt-3",children:"Add Channel"})]}),!0===_?Object(d.jsxs)("div",{className:"mt-3",children:[Object(d.jsx)("p",{children:"Something went wrong. Please make sure your input only contains:"}),Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:"numbers and letters (a - z, A - Z, 0 - 9)"}),Object(d.jsx)("li",{children:"spaces, underscores, and dashes ( , _, -)"})]})]}):null]})})]})},f=function(e){return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("div",{className:"row bg-light p-2 mb-4",children:Object(d.jsxs)("div",{className:"col",children:[Object(d.jsxs)("h1",{className:"text-center",children:[e.title,"undefined"!==typeof e.totalresults&&""!==e.totalresults?Object(d.jsxs)("span",{className:"fs-5",children:[" ~",e.totalresults," result(s) found"]}):null]}),Object(d.jsx)("hr",{}),e.channels.length>0?e.channels.map((function(t,a){return Object(d.jsxs)("div",{className:"lh-1",children:[Object(d.jsxs)("div",{className:"channel d-flex",children:[Object(d.jsx)("img",{src:t.imageurl,alt:t.name}),Object(d.jsxs)("div",{className:"mx-3",children:[Object(d.jsx)(o.Link,{to:"/channel/"+t._id,children:Object(d.jsx)("p",{className:"fs-4 fw-bold",children:t.name})}),Object(d.jsxs)("p",{children:["Videos: ",t.videocount]}),Object(d.jsxs)("p",{children:["Tags: ",t.tags.map((function(e,a){return Object(d.jsxs)("span",{children:[e.tagname,a+1!==t.tags.length?", ":" "]},e._id)}))]})]})]}),a+1!==e.channels.length?Object(d.jsx)("hr",{}):null]},t._id)})):Object(d.jsx)("div",{children:Object(d.jsx)("p",{children:"No matches found"})})]})}),Object(d.jsx)("nav",{"aria-label":"Page navigation example",children:Object(d.jsxs)("ul",{className:"pagination justify-content-center",children:["1"===e.startpos?Object(d.jsx)("li",{className:"page-item disabled",children:Object(d.jsx)(o.Link,{className:"page-link",to:"".concat(e.pageurl).concat(parseInt(e.startpos)-1),tabIndex:"-1","aria-disabled":"true",children:"<<"})}):Object(d.jsx)("li",{className:"page-item",children:Object(d.jsx)(o.Link,{className:"page-link",to:"".concat(e.pageurl).concat(parseInt(e.startpos)-1),tabIndex:"-1","aria-disabled":"true",children:"<<"})}),"1"===e.startpos?Object(d.jsx)("li",{className:"page-item",children:Object(d.jsx)(o.Link,{className:"page-link",style:{background:"#0d6efd",color:"#fff"},to:"".concat(e.pageurl,"1"),children:"1"})}):Object(d.jsx)("li",{className:"page-item",children:Object(d.jsx)(o.Link,{className:"page-link",to:"".concat(e.pageurl,"1"),children:"1"})}),e.pages>=2?Object(b.a)(Array(e.pages)).map((function(t,a){return 0===a?null:a+1===parseInt(e.startpos)?Object(d.jsx)("li",{className:"page-item",children:Object(d.jsx)(o.Link,{className:"page-link",to:"".concat(e.pageurl).concat(a+1),style:{background:"#0d6efd",color:"#fff"},children:a+1})},a):Object(d.jsx)("li",{className:"page-item",children:Object(d.jsx)(o.Link,{className:"page-link",to:"".concat(e.pageurl).concat(a+1),children:a+1})},a)})):null,parseInt(e.startpos)+1<=e.pages?Object(d.jsx)("li",{className:"page-item",children:Object(d.jsx)(o.Link,{className:"page-link",to:"".concat(e.pageurl).concat(parseInt(e.startpos)+1),children:">>"})}):Object(d.jsx)("li",{className:"page-item disabled",children:Object(d.jsx)(o.Link,{className:"page-link",to:"".concat(e.pageurl).concat(parseInt(e.startpos)+1),tabIndex:"-1","aria-disabled":"true",children:">>"})})]})})]})},g=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(0),o=Object(i.a)(l,2),j=o[0],b=o[1],u=Object(n.useState)(),m=Object(i.a)(u,2),h=m[0],O=m[1],p=Object(r.m)().startpos;return Object(n.useEffect)((function(){document.title="Channels | ASMRdb",""!==e.apiURL&&"undefined"!==typeof p&&fetch(e.apiURL+"/channel/limit/"+p,{method:"GET",mode:"cors"}).then((function(e){if(400!==e.status)return e.json()})).then((function(e){if("undefined"!==typeof e){s(e.channels),b(e.totalchannels);var t=Math.ceil(e.totalchannels/40);O(t<=0?1:t)}}))}),[e.apiURL,p]),Object(d.jsx)("div",{children:Object(d.jsx)(f,{channels:c,title:"Channels",totalresults:j,startpos:p,pages:h,pageurl:"/channels/"})})};var v=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(""),o=Object(i.a)(l,2),j=o[0],b=o[1],u=Object(n.useState)(""),m=Object(i.a)(u,2),h=m[0],O=m[1],p=Object(n.useState)(""),x=Object(i.a)(p,2),f=x[0],g=x[1],v=Object(n.useState)([]),N=Object(i.a)(v,2),y=N[0],S=N[1],L=Object(n.useState)(!1),w=Object(i.a)(L,2),R=w[0],C=w[1];return Object(d.jsxs)("div",{className:"container",children:[!0===R?Object(d.jsx)(r.c,{push:!0,to:"/login"}):null,!0===e.loggedIn?Object(d.jsx)(r.c,{push:!0,to:"/"}):null,Object(d.jsx)("div",{className:"row justify-content-center",children:Object(d.jsxs)("div",{className:"col-12 col-lg-6 bg-light p-4",children:[Object(d.jsx)("h1",{className:"text-center",children:"Register"}),Object(d.jsxs)("form",{onSubmit:function(t){""!==e.apiURL&&(t.preventDefault(),f===h?fetch(e.apiURL+"/user",{method:"POST",body:JSON.stringify({username:j,email:c,password:h,passwordRepeat:f}),headers:{"Content-Type":"application/json"},mode:"cors"}).then((function(e){if(200!==e.status)return e.json();C(!0)})).then((function(e){"undefined"!==typeof e&&("undefined"!==typeof e.errors||e.errors.length>0?S(e.errors):C(!0))})):S(["Passwords do not match."]))},children:[Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)("label",{htmlFor:"username",className:"form-label",children:"Username"}),Object(d.jsx)("input",{type:"string",className:"form-control",id:"username",required:!0,onChange:function(e){return b(e.target.value)}})]}),Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),Object(d.jsx)("input",{type:"email",className:"form-control",id:"email",required:!0,onChange:function(e){return s(e.target.value)}})]}),Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),Object(d.jsx)("input",{type:"password",className:"form-control",id:"password",required:!0,onChange:function(e){return O(e.target.value)}})]}),Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)("label",{htmlFor:"passwordrepeat",className:"form-label",children:"Password Repeated"}),Object(d.jsx)("input",{type:"password",className:"form-control",id:"passwordrepeat",required:!0,onChange:function(e){return g(e.target.value)}})]}),Object(d.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"}),y.length>0?Object(d.jsx)("div",{className:"text-center mt-3",children:y.map((function(e,t){return Object(d.jsx)("p",{className:"text-danger",children:e},t)}))}):null]})]})})]})},N=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)([]),r=Object(i.a)(l,2),j=r[0],b=r[1],u=Object(n.useState)([]),m=Object(i.a)(u,2),h=m[0],O=m[1],p=Object(n.useState)([]),x=Object(i.a)(p,2),f=x[0],g=x[1];return Object(n.useEffect)((function(){document.title="ASMRdb"}),[]),Object(n.useEffect)((function(){""!==e.apiURL&&(fetch(e.apiURL+"/channel/latest",{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(e){return s(e.channels)})),fetch(e.apiURL+"/tag/latest",{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(e){return b(e.tags)})),fetch(e.apiURL+"/channelrating/latest",{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(e){return O(e.reviews)})),fetch(e.apiURL+"/statistics",{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(e){return g(e)})))}),[e.apiURL]),Object(d.jsxs)("div",{className:"container",children:[Object(d.jsxs)("div",{className:"row bg-light mb-3 p-2",children:[Object(d.jsx)("h1",{children:"ASMR Database"}),Object(d.jsx)("hr",{}),Object(d.jsxs)("p",{children:["The goal of ASMRdb.net is to document all ASMR YouTubers. ",Object(d.jsx)("br",{}),"By collecting them all in one place, ASMR enthusiasts will have an easier time looking for new channels to listen to. This website is built as a wiki, so feel free to add channels, tags, and join in on discussions."]})]}),Object(d.jsx)("div",{className:"row bg-light mb-3 p-2",children:Object(d.jsxs)("div",{className:"col-12",children:[Object(d.jsx)("h2",{className:"text-center",children:"Recently Added"}),Object(d.jsx)("hr",{}),c.length>0?Object(d.jsx)("div",{className:"row",children:c.map((function(e){return Object(d.jsx)(o.Link,{to:"/channel/"+e._id,className:"col-4",style:{textDecoration:"none",color:"black"},children:Object(d.jsxs)("div",{className:"card h-100",children:[Object(d.jsx)("img",{src:e.imageurl,className:"card-img-top",alt:e.name}),Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsx)("h5",{className:"card-title",children:e.name}),Object(d.jsxs)("p",{className:"card-text",children:["Videos: ",e.videocount]}),"undefined"!==typeof e.tags&&e.tags.length>0?Object(d.jsx)("p",{children:e.tags.map((function(t,a){return Object(d.jsxs)("span",{children:[t.tagname,a+1!==e.tags.length?", ":" "]},t._id)}))}):null]})]})},e._id)}))}):Object(d.jsx)("div",{className:"spinner-border text-success",role:"status",children:Object(d.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]})}),Object(d.jsxs)("div",{className:"row bg-light p-2 mb-3",children:[Object(d.jsxs)("div",{className:"col-12 col-lg-4",children:[Object(d.jsx)("h2",{className:"text-center",children:"Latest Tags"}),Object(d.jsx)("hr",{}),j.length>0?j.map((function(e){return Object(d.jsx)(o.Link,{to:"/tag/"+e._id+"/1",children:Object(d.jsx)("p",{children:e.name})},e._id)})):Object(d.jsx)("div",{className:"spinner-border text-success",role:"status",children:Object(d.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]}),Object(d.jsxs)("div",{className:"col-12 col-lg-4 text-center ",children:[Object(d.jsx)("h2",{children:"Latest Reviews"}),Object(d.jsx)("hr",{}),h.length>0?h.map((function(e){return Object(d.jsx)("div",{children:Object(d.jsxs)("p",{className:"text-start",children:[Object(d.jsx)(o.Link,{to:"/channel/"+e.channelid._id,children:e.channelid.name})," - ",e.rating,"/10"]})},e._id)})):null]}),Object(d.jsxs)("div",{className:"col-12 col-lg-4",children:[Object(d.jsx)("h2",{className:"text-center",children:"Statistics"}),Object(d.jsx)("hr",{}),"undefined"!==typeof f?Object(d.jsxs)("div",{children:[Object(d.jsxs)("p",{children:["Users: ",f.users]}),Object(d.jsxs)("p",{children:["Channels: ",f.channels]}),Object(d.jsxs)("p",{children:["Tags: ",f.tags]}),Object(d.jsxs)("p",{children:["Reviews: ",f.reviews]})]}):Object(d.jsx)("div",{className:"spinner-border text-success",role:"status",children:Object(d.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]})]})]})},y=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],s=a[1],l=Object(r.k)(),j=function(t){t.preventDefault(),""!==e.apiURL&&(s(""),l.push("/search/"+encodeURIComponent(c).split(" ").join("_")+"/1"))};return Object(d.jsx)("nav",{className:"navbar navbar-light navbar-expand-lg shadow mb-5",style:{backgroundColor:"black"},children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(o.Link,{to:"/",className:"navbar-brand text-white",children:"Home"}),Object(d.jsx)("button",{className:"navbar-toggler navbar-dark",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(d.jsx)("span",{className:"navbar-toggler-icon"})}),Object(d.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(d.jsxs)("ul",{className:'navbar-nav me-auto mb-lg-0"',children:[Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(o.Link,{to:"/channels/1",className:"nav-link text-white",children:"Channels"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(o.Link,{to:"/tags",className:"nav-link text-white",children:"Tags"})}),Object(d.jsx)("li",{className:"nav-item",children:!0===e.loggedIn?Object(d.jsx)(o.Link,{to:"/add",className:"nav-link text-white",children:"Add Channel"}):null}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(o.Link,{to:"/boards",className:"nav-link text-white",children:"Discussion"})}),e.loggedIn?Object(d.jsx)("li",{onClick:function(){return e.setLogin(!1)},className:"nav-item nav-link text-white",style:{cursor:"pointer"},children:"Log Out"}):Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(o.Link,{to:"/login",className:"nav-link text-white",children:"Login"})})]}),Object(d.jsx)("form",{className:"form-inline my-2 my-lg-0 d-flex",onSubmit:function(e){return j(e)},children:Object(d.jsxs)("div",{className:"input-group",children:[Object(d.jsx)("input",{className:"form-control mr-sm-2 rounded-start",type:"text",onChange:function(e){return s(e.target.value)},name:"query",placeholder:"Search...",value:c,"aria-label":"Search"}),Object(d.jsx)("button",{className:"btn btn-outline-success my-2 my-sm-0",style:{backgroundColor:"darkGreen"},children:Object(d.jsx)(u.b,{onClick:function(e){return j(e)},color:"black"})})]})})]})]})})},S=function(e){var t=Object(r.m)(),a=t.id,c=t.startpos,s=Object(n.useState)([]),l=Object(i.a)(s,2),o=l[0],j=l[1],b=Object(n.useState)(),u=Object(i.a)(b,2),m=u[0],h=u[1],O=Object(n.useState)(0),p=Object(i.a)(O,2),x=p[0],g=p[1],v=Object(n.useState)(),N=Object(i.a)(v,2),y=N[0],S=N[1];return Object(n.useEffect)((function(){""!==e.apiURL&&fetch(e.apiURL+"/tag/"+a+"/channels/"+c,{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(e){j(e.channels),g(e.totalchannels),h(e.tag);var t=Math.ceil(e.totalchannels/40);S(t<=0?1:t)}))}),[e.apiURL,a,c]),Object(n.useEffect)((function(){}),[o]),Object(n.useEffect)((function(){"undefined"!==typeof m&&""!==m.name&&(document.title=m.name+" | ASMRdb")}),[m]),Object(d.jsx)(f,{pageurl:"/".concat(a,"/"),pages:y,startpos:c,totalresults:x,channels:o,title:"undefined"!==typeof m?"Tag: "+m.name:"Tag: "})},L=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(""),r=Object(i.a)(l,2),j=r[0],b=r[1],u=Object(n.useState)(""),m=Object(i.a)(u,2),h=m[0],O=m[1],p=Object(n.useState)(""),x=Object(i.a)(p,2),f=x[0],g=x[1],v=Object(n.useState)([]),N=Object(i.a)(v,2),y=N[0],S=N[1],L=Object(n.useState)([]),w=Object(i.a)(L,2),R=w[0],C=w[1],k=Object(n.useState)(!1),T=Object(i.a)(k,2),U=T[0],I=T[1];return Object(n.useEffect)((function(){document.title="Tags | ASMRdb",null!==localStorage.getItem("token")&&g(localStorage.getItem("token")),""!==e.apiURL&&fetch(e.apiURL+"/tag",{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(e){S(e.approved.sort((function(e,t){return e.name>t.name}))),C(e.waiting)}))}),[e.apiURL,U]),Object(n.useEffect)((function(){}),[y]),Object(d.jsxs)("div",{className:"container",children:[Object(d.jsxs)("div",{className:"row bg-light",children:[Object(d.jsx)("div",{className:"col-12 col-lg-2 p-2 text-center",children:Object(d.jsx)("button",{type:"button",className:"btn btn-success","data-bs-toggle":"modal","data-bs-target":"#tagModal",children:"Add A New Tag"})}),Object(d.jsxs)("div",{className:"col-12 col-lg-5 p-2 text-center",children:[Object(d.jsx)("h1",{children:"Tags"}),Object(d.jsx)("hr",{}),y.length>0?y.map((function(e,t){return Object(d.jsx)("p",{children:Object(d.jsx)(o.Link,{to:"/tag/"+e._id+"/1",children:e.name})},e._id)})):Object(d.jsx)("div",{className:"spinner-border text-success",role:"status",children:Object(d.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]}),Object(d.jsxs)("div",{className:"col-12 col-lg-5 p-2 text-center",children:[Object(d.jsx)("h1",{children:"Waiting Approval"}),Object(d.jsx)("hr",{}),R.length>0?R.map((function(e,t){return Object(d.jsx)("p",{children:e.name},e._id)})):Object(d.jsx)("p",{children:"None"})]})]}),Object(d.jsx)("div",{className:"modal fade",id:"tagModal",tabIndex:"-1","aria-labelledby":"tagModalLabel","aria-hidden":"true",children:Object(d.jsx)("div",{className:"modal-dialog",children:Object(d.jsxs)("div",{className:"modal-content",children:[Object(d.jsxs)("div",{className:"modal-header",children:[Object(d.jsx)("h5",{className:"modal-title",id:"tagModalLabel",children:"Add a Tag"}),Object(d.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(d.jsx)("div",{className:"modal-body",children:Object(d.jsxs)("form",{onSubmit:function(t){return function(t){t.preventDefault(),""!==e.apiURL&&fetch(e.apiURL+"/tag",{method:"POST",body:JSON.stringify({name:c,description:j,reason:h}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+f},mode:"cors"}).then((function(e){200===e.status&&(I(!U),alert("sent"))}))}(t)},children:[Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)("label",{htmlFor:"tag-name",className:"form-label",children:"Name"}),Object(d.jsx)("input",{type:"string",className:"form-control",id:"tag-name",required:!0,onChange:function(e){return s(e.target.value)}})]}),Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)("label",{htmlFor:"tag-description",className:"form-label",children:"Description:"}),Object(d.jsx)("textarea",{className:"form-control",id:"tag-description",rows:"3",onChange:function(e){return b(e.target.value)}})]}),Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)("label",{htmlFor:"tag-reason",className:"form-label",children:"Reasoning for adding:"}),Object(d.jsx)("textarea",{className:"form-control",id:"tag-reason",rows:"3",onChange:function(e){return O(e.target.value)}})]}),Object(d.jsx)("button",{type:"button mt-3 float-end",className:"btn btn-primary",children:"Submit Tag"})]})}),Object(d.jsx)("div",{className:"modal-footer",children:Object(d.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:function(e){return function(e){e.preventDefault(),Array.from(document.querySelectorAll("input")).forEach((function(e){return e.value=""})),Array.from(document.querySelectorAll("textarea")).forEach((function(e){return e.value=""})),s(""),b(""),O("")}(e)},children:"Close"})})]})})})]})},w=function(){return Object(d.jsx)("div",{className:"container",children:Object(d.jsx)("div",{className:"row",children:Object(d.jsx)("div",{className:"col-12 bg-light",children:Object(d.jsx)("p",{children:"AHHHHHH"})})})})},R=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],s=a[1];return Object(n.useEffect)((function(){""!==e.apiURL&&fetch(e.apiURL+"/board",{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(e){"undefined"!==typeof e&&s(e.boards)}))}),[e.apiURL]),Object(d.jsx)("div",{className:"container",children:Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-12 bg-light text-center p-3",children:[Object(d.jsx)("h1",{children:"Boards"}),Object(d.jsx)("hr",{}),c.length>0?c.map((function(e,t){return Object(d.jsx)(o.Link,{to:"/board/"+e._id,className:"fs-3",style:{textDecoration:"none"},children:Object(d.jsx)("p",{children:e.name})},e._id)})):Object(d.jsx)("div",{className:"spinner-border text-success",role:"status",children:Object(d.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]})})})},C=function(e){var t=Object(r.m)().id,a=Object(n.useState)(),c=Object(i.a)(a,2),s=c[0],l=c[1],o=Object(n.useState)(),j=Object(i.a)(o,2),b=j[0],m=j[1],h=Object(n.useState)(),p=Object(i.a)(h,2),x=p[0],f=p[1],g=Object(n.useState)([]),v=Object(i.a)(g,2),N=v[0],y=v[1],S=Object(n.useState)(""),L=Object(i.a)(S,2),w=L[0],R=L[1],C=Object(n.useState)(!1),k=Object(i.a)(C,2),T=k[0],U=k[1],I=Object(n.useState)(""),E=Object(i.a)(I,2),A=E[0],_=E[1];Object(n.useEffect)((function(){null!==localStorage.getItem("token")&&m(localStorage.getItem("token")),null!==localStorage.getItem("id")&&l(localStorage.getItem("id"))}),[]),Object(n.useEffect)((function(){""!==e.apiURL&&fetch(e.apiURL+"/thread/"+t,{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(e){"undefined"!==typeof e&&(f(e.threaddata),y(e.comments),_(e.threaddata.comment))}))}),[e.apiURL,t,T]);return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-12 bg-light p-3",children:["undefined"!==typeof x?Object(d.jsxs)("div",{className:"lh-1",children:[Object(d.jsx)("h1",{children:x.title}),Object(d.jsxs)("p",{className:"mb-2",children:["Posted by ","undefined"!==typeof x.author?x.author.username:"DELETED"," on ",O.DateTime.fromISO(x.date).toFormat("yyyy LLL dd")]}),"undefined"!==typeof x.comment?Object(d.jsx)("p",{className:"fs-3",style:{whiteSpace:"pre-wrap"},children:x.comment}):null,"undefined"!==typeof x.author&&x.author._id===s?Object(d.jsxs)("p",{children:[Object(d.jsx)("span",{style:{color:"blue",cursor:"pointer"},"data-bs-toggle":"modal","data-bs-target":"#editCommentModal",children:"Edit"})," ",Object(d.jsx)("span",{style:{color:"blue",cursor:"pointer"},className:"mx-5",onClick:function(a){""!==e.apiURL&&fetch(e.apiURL+"/thread/"+t,{method:"DELETE",mode:"cors",headers:{Authorization:"Bearer "+b}}).then((function(e){return U(!T)}))},children:"Delete"})]}):null]}):Object(d.jsx)("p",{children:"Loading..."}),Object(d.jsx)("hr",{}),!0===e.loggedIn?Object(d.jsxs)("form",{children:[Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)("label",{htmlFor:"commentFormTextArea",className:"form-label",children:"Comment"}),w.length>0?Object(d.jsx)("textarea",{className:"form-control",id:"commentFormTextArea",rows:"3",value:w,onChange:function(e){return R(e.target.value)}}):Object(d.jsx)("textarea",{className:"form-control",id:"commentFormTextArea",rows:"3",onChange:function(e){return R(e.target.value)}})]}),Object(d.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(a){return function(a){a.preventDefault(),""!==e.apiURL&&fetch(e.apiURL+"/thread/"+t+"/comment",{method:"POST",mode:"cors",body:JSON.stringify({comment:w}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+b}}).then((function(e){return U(!T)}))}(a)},children:"Submit"}),Object(d.jsx)("hr",{})]}):null,N.length>0?N.map((function(a,n){return Object(d.jsxs)("div",{style:{backgroundColor:"lightgray",paddingRight:"0"},className:n+1!==N.length?"p-3 mb-2 lh-lg":"p-3 lh-lg",children:[Object(d.jsxs)("p",{className:"mb-0",children:["Posted by ","undefined"!==typeof a.author?a.author.username:"DELETED"," on ",O.DateTime.fromISO(a.date).toFormat("yyyy LLL dd")," ID: ",Object(d.jsx)("span",{style:{cursor:"pointer",color:"blue"},onClick:function(e){return t=e.target.textContent,void R(w+"@"+t+"\n");var t},children:a._id}),a.author._id===s?Object(d.jsx)(u.a,{color:"blue",size:"1.5em",cursor:"pointer",onClick:function(n){return c=a._id,void(""!==e.apiURL&&fetch(e.apiURL+"/thread/"+t+"/comment/"+c,{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer "+b}}).then((function(e){return U(!T)})));var c}}):null]}),Object(d.jsx)("hr",{className:"mt-0"}),Object(d.jsx)("p",{className:"mb-0",style:{whiteSpace:"pre-wrap"},children:a.comment})]},a._id)})):Object(d.jsx)("div",{style:{backgroundColor:"lightgray",paddingRight:"0"},className:"p-3",children:Object(d.jsx)("p",{className:"mb-0",children:"No comments in this thread"})})]})}),Object(d.jsx)("div",{className:"modal fade",id:"editCommentModal",tabIndex:"-1","aria-labelledby":"editCommentModalLabel","aria-hidden":"true",children:Object(d.jsx)("div",{className:"modal-dialog",children:Object(d.jsxs)("div",{className:"modal-content",children:[Object(d.jsxs)("div",{className:"modal-header",children:[Object(d.jsx)("h5",{className:"modal-title",id:"editCommentModalLabel",children:"Edit Comment"}),Object(d.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(d.jsx)("div",{className:"modal-body",children:Object(d.jsxs)("form",{children:[Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)("label",{htmlFor:"threadtextinput",className:"form-label",children:"Text:"}),"undefined"!==typeof A&&A.length>0?Object(d.jsx)("textarea",{className:"form-control",id:"threadtextinput",max:"10000",value:A,onChange:function(e){return _(e.target.value)},rows:"4"}):Object(d.jsx)("textarea",{className:"form-control",id:"threadtextinput",max:"10000",onChange:function(e){return _(e.target.value)},rows:"4"})]}),Object(d.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(a){return a.target.value,void(""!==e.apiURL&&fetch(e.apiURL+"/thread/"+t,{method:"PUT",mode:"cors",body:JSON.stringify({comment:A}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+b}}).then((function(e){return U(!T)})))},"data-bs-dismiss":"modal",children:"Submit"})]})}),Object(d.jsx)("div",{className:"modal-footer",children:Object(d.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})})]})})})]})},k=function(e){var t=Object(r.k)(),a=Object(r.m)().id,c=Object(n.useState)([]),s=Object(i.a)(c,2),l=s[0],j=s[1],b=Object(n.useState)(),u=Object(i.a)(b,2),m=u[0],h=u[1],p=Object(n.useState)(""),x=Object(i.a)(p,2),f=x[0],g=x[1],v=Object(n.useState)(""),N=Object(i.a)(v,2),y=N[0],S=N[1],L=Object(n.useState)(""),w=Object(i.a)(L,2),R=w[0],C=w[1];Object(n.useEffect)((function(){""!==e.apiURL&&fetch(e.apiURL+"/board/"+a,{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(e){"undefined"!==typeof e&&(j(e.threads),h(e.board))}))}),[e.apiURL,a]),Object(n.useEffect)((function(){null!==localStorage.getItem("token")&&C(localStorage.getItem("token"))}),[]);return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("div",{className:"row mb-3",children:Object(d.jsxs)("div",{className:"col-12 bg-light p-3",children:["undefined"===typeof m?Object(d.jsx)("h1",{children:"Loading..."}):Object(d.jsxs)("div",{className:"text-center",children:[Object(d.jsx)("h1",{children:m.name}),Object(d.jsx)("p",{children:m.description}),!0===e.loggedIn?Object(d.jsx)("button",{type:"button",className:"btn btn-success","data-bs-toggle":"modal","data-bs-target":"#createThreadModal",children:"Create thread"}):null]}),Object(d.jsx)("hr",{}),l.length>0?l.map((function(e,t){return Object(d.jsxs)("div",{className:"lh-sm",children:[Object(d.jsx)(o.Link,{to:"/thread/"+e._id,className:"fs-3",style:{textDecoration:"none"},children:e.title}),"undefined"===typeof e.author?Object(d.jsx)("p",{className:"mb-0",children:"Author: DELETED"}):Object(d.jsxs)("p",{className:"mb-0",children:["Author: ",e.author.username]}),Object(d.jsxs)("p",{className:"mb-0",children:["Posted: ",O.DateTime.fromISO(e.date).toFormat("yyyy LLL dd")]}),t+1!==l.length?Object(d.jsx)("hr",{}):null]},e._id)})):Object(d.jsx)("p",{children:"No threads found"})]})}),Object(d.jsx)("div",{className:"modal fade",id:"createThreadModal",tabIndex:"-1","aria-labelledby":"createThreadModalLabel","aria-hidden":"true",children:Object(d.jsx)("div",{className:"modal-dialog",children:Object(d.jsxs)("div",{className:"modal-content",children:[Object(d.jsxs)("div",{className:"modal-header",children:[Object(d.jsx)("h5",{className:"modal-title",id:"createThreadModalLabel",children:"Create Thread"}),Object(d.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(d.jsx)("div",{className:"modal-body",children:Object(d.jsxs)("form",{children:[Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)("label",{htmlFor:"threadname",className:"form-label",children:"Title:"}),Object(d.jsx)("input",{type:"text",className:"form-control",minLength:"3",maxLength:"50",id:"threadname",onChange:function(e){return g(e.target.value)},required:!0})]}),Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)("label",{htmlFor:"threadtextinput",className:"form-label",children:"Text (optional):"}),Object(d.jsx)("textarea",{className:"form-control",id:"threadtextinput",max:"10000",rows:"4",onChange:function(e){return S(e.target.value)}})]}),Object(d.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(a){return function(a){if(a.preventDefault(),""!==e.apiURL&&""!==m._id){document.getElementById("createThreadModal");var n={title:f,comment:y,boardid:m._id};fetch(e.apiURL+"/thread",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+R},body:JSON.stringify(n),mode:"cors"}).then((function(e){return e.json()})).then((function(e){"undefined"!==typeof e&&t.push("/thread/"+e.id)}))}}(a)},"data-bs-dismiss":"modal",children:"Submit"})]})}),Object(d.jsx)("div",{className:"modal-footer",children:Object(d.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})})]})})})]})},T=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(0),o=Object(i.a)(l,2),j=o[0],b=o[1],u=Object(n.useState)(),m=Object(i.a)(u,2),h=m[0],O=m[1],p=Object(r.m)(),x=p.searchstring,g=p.startpos;return Object(n.useEffect)((function(){if(""!==e.apiURL&&""!==x){var t=x.split("_").join(" ");t=decodeURIComponent(t),document.title=t+" | ASMRdb",fetch(e.apiURL+"/channel/"+g+"/search?query="+t,{method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(e){s(e.channels),b(e.totalChannels);var t=Math.ceil(e.totalchannels/40);O(t<=0?1:t)}))}}),[e.apiURL,x,g]),Object(d.jsx)(f,{channels:c,totalresults:j,title:"Search: "+decodeURIComponent(x.split("-").join(" ")),pages:h})},U=(a(38),a(4)),I=U.HashRouter,E=U.Switch,A=U.Route;var _=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!1),l=Object(i.a)(s,2),r=l[0],o=l[1];function b(e){!1===e?(localStorage.removeItem("token"),localStorage.removeItem("id"),o(!1)):o(!0)}return Object(n.useEffect)((function(){}),[r]),Object(n.useEffect)((function(){c("https://dry-hollows-28901.herokuapp.com"),null!==localStorage.getItem("token")&&fetch("https://dry-hollows-28901.herokuapp.com/user/verify",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},mode:"cors"}).then((function(e){403===e.status||401===e.status?(localStorage.removeItem("token"),localStorage.removeItem("id"),o(!1)):o(!0)}))}),[]),Object(n.useEffect)((function(){}),[a]),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("div",{style:{minHeight:"97vh"},children:Object(d.jsxs)(I,{hashType:"slash",children:[Object(d.jsx)(y,{setLogin:b,loggedIn:r,apiURL:""===a?"":a}),Object(d.jsxs)(E,{children:[Object(d.jsx)(A,{path:"/",exact:!0,children:Object(d.jsx)(N,{apiURL:""===a?"":a})}),Object(d.jsx)(A,{path:"/channel/:id",exact:!0,children:Object(d.jsx)(p,{loggedIn:r,apiURL:""===a?"":a})}),Object(d.jsx)(A,{path:"/add",exact:!0,children:Object(d.jsx)(x,{loggedIn:r,apiURL:""===a?"":a})}),Object(d.jsx)(A,{path:"/boards",exact:!0,children:Object(d.jsx)(R,{loggedIn:r,apiURL:""===a?"":a})}),Object(d.jsx)(A,{path:"/board/:id",exact:!0,children:Object(d.jsx)(k,{loggedIn:r,apiURL:""===a?"":a})}),Object(d.jsx)(A,{path:"/thread/:id",exact:!0,children:Object(d.jsx)(C,{loggedIn:r,apiURL:""===a?"":a})}),Object(d.jsx)(A,{path:"/user/:id",exact:!0,children:Object(d.jsx)(w,{apiURL:""===a?"":a})}),Object(d.jsx)(A,{path:"/register",exact:!0,children:Object(d.jsx)(v,{loggedIn:r,apiURL:""===a?"":a})}),Object(d.jsx)(A,{path:"/tag/:id/:startpos",exact:!0,children:Object(d.jsx)(S,{loggedIn:r,apiURL:""===a?"":a})}),Object(d.jsx)(A,{path:"/tags",exact:!0,children:Object(d.jsx)(L,{loggedIn:r,apiURL:""===a?"":a})}),Object(d.jsx)(A,{path:"/login",exact:!0,children:Object(d.jsx)(j,{setLogin:b,loggedIn:r,apiURL:a})}),Object(d.jsx)(A,{path:"/channels/:startpos",exact:!0,children:Object(d.jsx)(g,{setLogin:b,loggedIn:r,apiURL:a})}),Object(d.jsx)(A,{path:"/search/:searchstring/:startpos",exact:!0,children:Object(d.jsx)(T,{apiURL:""===a?"":a})})]})]})}),Object(d.jsx)("div",{style:{backgroundColor:"black",minHeight:"3vh"},className:"text-center",children:Object(d.jsx)("a",{style:{textDecoration:"none",color:"white"},target:"_blank",rel:"noreferrer",href:"https://github.com/anthony-argel",children:"Developer"})})]})};l.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(_,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.5f97ee9a.chunk.js.map