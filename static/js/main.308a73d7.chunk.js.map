{"version":3,"sources":["components/login.js","components/channel.js","components/channelform.js","components/channellist.js","components/channels.js","components/register.js","components/home.js","components/navbar.js","components/tag.js","components/tags.js","components/user.js","components/boards.js","components/thread.js","components/board.js","components/search.js","App.js","index.js"],"names":["Login","props","useState","email","setEmail","password","setPassword","error","setError","useEffect","document","title","className","loggedIn","push","to","onSubmit","e","apiURL","preventDefault","fetch","method","body","JSON","stringify","headers","mode","then","res","status","json","localStorage","setItem","token","id","setLogin","htmlFor","type","onChange","target","value","Channel","useParams","setToken","channel","setChannel","comment","setComment","commentList","setCommentList","rating","setRating","numberOfRaters","setNumberOfRaters","ratersList","setRatersList","userid","setUserId","personalReviewData","setPersonalReviewData","reviewList","setReviewList","userReviewData","setUserReviewData","formRating","setFormRating","formReview","setFormReview","requestingRefresh","setRequestingRefresh","allTags","setAllTags","channelTags","setChannelTags","ytStatus","setYTStatus","twitterURL","setTwitterURL","niconicoURL","setNiconicoURL","ytAliases","setYTAliases","ytUpdateError","setYTUpdateError","refreshComments","comments","getItem","name","twitter","niconico","aliases","reviews","ratings","avgRating","newRatingsArray","i","length","sort","a","b","DateTime","fromISO","date","toMillis","slice","tags","raterid","_id","src","imageurl","alt","style","backgroundColor","role","viewcount","videocount","href","rel","size","color","youtube","data-bs-toggle","data-bs-target","onClick","refreshYTStats","marginBottom","tagId","selectedTag","getElementById","tagid","addTag","list","map","index","data-tag-id","tagname","cursor","idToDelete","deleteTag","minHeight","height","width","Math","max","aria-valuenow","aria-valuemin","aria-valuemax","toFixed","Array","from","querySelectorAll","forEach","input","review","username","toFormat","tabIndex","aria-labelledby","aria-hidden","data-bs-dismiss","aria-label","sendRating","sendReview","submitReview","required","placeholder","min","defaultValue","rows","maxLength","sendChannelEdits","aria-describedby","channelid","authorid","float","commentid","deleteComment","whiteSpace","ChannelForm","setStatus","setNiconico","setYoutube","setTwitter","redirecting","setRedirecting","redirectURL","setRedirectURL","errors","setErrors","addChannel","ChannelList","totalresults","channels","tagvals","startpos","pageurl","parseInt","aria-disabled","background","pages","ind","Channels","setChannels","totalChannels","setTotalChannels","setPages","totalchannels","estimatedPages","ceil","setUsername","passwordRepeat","setPasswordRepeat","errorList","setErrorList","accountCreated","setAccountCreated","Homepage","setTags","setReviews","stats","setStats","textDecoration","val","users","NavBar","search","setSearch","history","useHistory","sendSearch","split","join","aria-controls","aria-expanded","Tag","tag","setTag","Tags","newTagName","setNewTagName","newTagDescription","setNewTagDescription","newTagReason","setNewTagReason","approvedTags","setApprovedTags","waitingTags","setWaitingTags","refresh","setRefresh","approved","waiting","description","reason","alert","submitNewTag","closeForm","User","Boards","boards","setBoards","Thread","userId","threadData","setThreadData","commentsList","setCommentsList","threadText","setThreadText","threaddata","author","submitComment","paddingRight","text","textContent","Board","threads","setThreads","board","setBoard","newThreadTitle","setNewThreadTitle","newThreadText","setNewThreadText","minLength","requestData","boardid","submitThread","Search","searchstring","query","require","HashRouter","Switch","Route","App","setApiUrl","setLoggedIn","removeItem","hashType","path","exact","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.308a73d7.chunk.js","sourcesContent":["import {useState, useEffect} from 'react';\nimport { Link, Redirect } from 'react-router-dom';\n\nfunction Login(props) {\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [error, setError] = useState(false);\n\n\n    useEffect(() => {\n        document.title = 'ASMRdb';\n    }, [])\n\n    function login(e){\n        if(props.apiURL !== '') {\n            e.preventDefault();\n            fetch(props.apiURL + '/user/login', {\n                method: 'POST',\n                body: JSON.stringify({email: email, password: password}),\n                headers: { 'Content-Type': 'application/json' },\n                mode: 'cors'\n            })\n            .then(res => {\n                if(res.status !== 200){\n                    setError(true);\n                }\n                else {\n                    return res.json()\n                }\n            })\n            .then(res => {\n                if(res) {\n                    localStorage.setItem('token', res.token);\n                    localStorage.setItem('id', res.id);\n                    props.setLogin(true);\n                }\n            })\n\n        }\n    }\n\n    return(\n    <div className='container'>\n        {props.loggedIn === true ? <Redirect push to='/'/> : null}\n        <div className='row justify-content-center'>\n            <div className='col-12 col-lg-6  bg-light p-4'>\n            <h1 className='text-center'>Login</h1>\n                <form onSubmit={login}>\n                    <div className='mb-3'>\n                        <label htmlFor='email' className='form-label'>Email Address</label>\n                        <input type='email' className='form-control' id='email' \n                            onChange={e => setEmail(e.target.value)}/>\n                    </div>\n                    <div className='mb-3'>\n                        <label htmlFor='password' className='form-label'>Password</label>\n                        <input type='password' className='form-control' id='password'\n                            onChange={e=>setPassword(e.target.value)}/>\n                    </div>\n                    <button type='submit' className='btn btn-primary'>Submit</button>\n                    {error === true ? <p className='text-center text-danger'>Email or password was incorrect. Please try again.</p> : null}\n                </form>\n                <hr/>\n                <div className='text-center'>\n                    <Link to='/register'>Create an Account</Link>\n                </div>\n            </div>\n        </div>\n    </div>)\n}\n\nexport default Login;","import { useEffect, useState } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport {FaTwitter, FaYoutube} from 'react-icons/fa';\nimport {SiNiconico} from 'react-icons/si';\nimport {MdClose} from 'react-icons/md';\nimport {DateTime} from 'luxon';\n\nfunction Channel(props) {\n    let {id} = useParams();\n    const [token, setToken] = useState('');\n    const [channel, setChannel] = useState();\n    const [comment, setComment] = useState('');\n    const [commentList, setCommentList] = useState([]);\n\n\n    const [rating, setRating] = useState(0); //avg rating?\n    const [numberOfRaters, setNumberOfRaters] = useState(0);\n    const [ratersList, setRatersList] = useState([]);\n    const [userid, setUserId] = useState();\n    const [personalReviewData, setPersonalReviewData] = useState();\n    const [reviewList, setReviewList] = useState([]);\n\n    const [userReviewData, setUserReviewData] = useState([]);\n\n    const [formRating, setFormRating] = useState();\n    const [formReview, setFormReview] = useState();\n\n    const [requestingRefresh, setRequestingRefresh]  = useState(false);\n\n    const [allTags, setAllTags] = useState([]);\n    const [channelTags, setChannelTags] = useState([]);\n\n    const [ytStatus, setYTStatus] = useState();\n    const [twitterURL, setTwitterURL] = useState();\n    const [niconicoURL, setNiconicoURL] = useState();\n    const [ytAliases, setYTAliases] = useState();\n\n    const [ytUpdateError, setYTUpdateError] = useState();\n\n    const refreshComments = () => {\n        if(props.apiURL !== '') {\n            fetch(props.apiURL+'/comment/'+id, {\n                method: 'GET',\n                mode: 'cors'\n            })\n            .then(res => {\n                if(res.status === 200) {\n                    return res.json();\n                }\n            })\n            .then(res=>{\n                setCommentList(res.comments)})\n        }\n    }\n\n    useEffect(() => {\n        if(localStorage.getItem('token') !== null) {\n            setToken(localStorage.getItem('token'));\n        }\n        if(localStorage.getItem('id') !== null) {\n            setUserId(localStorage.getItem('id'));\n        }\n    }, []);\n\n    useEffect(() => {\n        if(props.apiURL !== '') {\n            fetch(props.apiURL+\"/channel/\"+id+'/all', {\n                method: 'GET',\n                mode: 'cors'\n            })\n            .then(res => res.json())\n            .then(res => {\n                document.title = res.channel.name;\n                setChannel(res.channel);\n                setYTStatus(res.channel.status);\n                setTwitterURL(res.channel.twitter);\n                setNiconicoURL(res.channel.niconico);\n                setYTAliases(res.channel.aliases);\n\n                let reviews = res.ratings;\n                let avgRating = 0;\n                let newRatingsArray = [0,0,0,0,0,0,0,0,0,0,0];\n                for(let i = 0; i < reviews.length; i++) {\n                    avgRating += reviews[i].rating;\n                    newRatingsArray[reviews[i].rating]++;\n                }\n\n                reviews.sort((a,b) => {\n                    return DateTime.fromISO(b.date).toMillis() - DateTime.fromISO(a.date).toMillis();})\n                if (reviews.length > 10) {\n                    setReviewList(reviews.slice(0,10))\n                }\n                else {\n                    setReviewList(reviews);\n                }\n                setRatersList(newRatingsArray);\n                if(reviews.length > 0) {\n                    setRating(avgRating / reviews.length);\n                }\n                setNumberOfRaters(reviews.length);\n                setCommentList(res.comments);\n                setAllTags(res.allTags);\n                setChannelTags(res.channel.tags);\n            });\n        }\n    }, [props.apiURL, id, userid, requestingRefresh, props.loggedIn]);\n\n    useEffect(() => {\n    }, [channel]);\n\n    useEffect(() => {\n        if(typeof userid !== 'undefined' && reviewList.length > 0) {\n            for(let i = 0; i < reviewList.length; i++) {\n                if(reviewList[i].raterid._id === userid) {\n                    setPersonalReviewData(reviewList[i]);\n                    break;\n                }\n            }\n        }\n    }, [userid, reviewList]);\n\n    \n\n    const postComment = (e) => {\n        e.preventDefault();\n        if(props.apiURL !== '') {\n            fetch(props.apiURL+\"/comment\", {\n                method: 'POST',\n                body: JSON.stringify({channelid: id, comment:comment}),\n                headers: { 'Content-Type': 'application/json',\n                'Authorization' : 'Bearer ' + token },\n                mode: 'cors'\n            })\n            .then(res => {\n                if(res.status === 200) {\n                    refreshComments();\n                }\n            })\n        }\n    }\n\n    const deleteComment = (id, authorid) => {\n        if(props.apiURL !== '') {\n            fetch(props.apiURL+'/comment',{\n                method: 'DELETE',\n                body: JSON.stringify({\n                    authorid: authorid,\n                    commentid: id,\n                }),\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization' : 'Bearer ' + token},\n                mode: 'cors'\n            })\n            .then(res => {\n                if(res.status === 200) {\n                    refreshComments();\n                }\n            })\n        }\n    }\n\n    const submitReview = (e) => {\n        e.preventDefault();\n        let sendRating = 0;\n        let sendReview = ' ';\n        if(typeof formRating === 'undefined') {\n            if(typeof personalReviewData !== 'undefined') {\n                sendRating = personalReviewData.rating;\n            }\n        } else {\n            sendRating = formRating;\n        }\n\n        if(typeof formReview === 'undefined') {\n            if(typeof personalReviewData !== 'undefined') {\n                sendReview = personalReviewData.review;\n            }\n        } else {\n            sendReview = formReview;\n        }\n\n        fetch(props.apiURL+\"/channelrating/\"+id, {\n            method: 'POST',\n            body: JSON.stringify({\n                rating: sendRating,\n                review: sendReview\n            }),\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization' : 'Bearer ' + token},\n            mode: 'cors'\n        })\n        .then( res => {\n            if(res.status === 200) {\n                setRequestingRefresh(!requestingRefresh);\n            }\n        }\n        );\n    }\n\n    const deleteReview = () => {\n        if(props.apiURL !== '') {\n            fetch(props.apiURL + '/channelrating/' +id, {\n                method: 'DELETE',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization' : 'Bearer ' + token},\n                mode: 'cors'\n            })\n            .then(res => {\n                if (res.status === 200) {\n                    setRequestingRefresh(!requestingRefresh);\n                    Array.from(document.querySelectorAll(\"input\")).forEach(\n                        input => (input.value = \"\")\n                    );\n                    Array.from(document.querySelectorAll(\"textarea\")).forEach(\n                        input => (input.value = \"\")\n                    );\n                    setPersonalReviewData(-1);\n                }\n            })\n        }\n    }\n\n    function addTag(e) {\n        e.preventDefault();\n        if(props.apiURL !== '') {\n            let tagId = 0;\n            let selectedTag = document.getElementById('tag').value;\n            for(let i = 0; i < allTags.length; i++) {\n                if(allTags[i].name === selectedTag) {\n                    tagId = allTags[i]._id;\n                }\n            }\n\n            if(tagId !== 0) {\n                fetch(props.apiURL + '/channel/' +id+'/tag', {\n                    method: 'POST',\n                    body: JSON.stringify({\n                        tagid: tagId\n                    }),\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Authorization' : 'Bearer ' + token},\n                    mode: 'cors'\n                })\n                .then(res => {\n                    setRequestingRefresh(!requestingRefresh);\n                })\n            }\n            else {\n            }\n        }\n    }\n\n    function deleteTag(e, idToDelete) {\n        e.preventDefault();\n        if(props.apiURL !== '') {\n            fetch(props.apiURL + '/channel/' +id+'/tag', {\n                method: 'DELETE',\n                body: JSON.stringify({\n                    tagid: idToDelete\n                }),\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization' : 'Bearer ' + token},\n                mode: 'cors'\n            })\n            .then(res => {\n                setRequestingRefresh(!requestingRefresh);\n            })\n\n        }\n    }\n\n    function sendChannelEdits(e) {\n        e.preventDefault();\n        if(props.apiURL !== '') {\n            fetch(props.apiURL + '/channel/'+id, {\n                method: 'PUT',\n                body: JSON.stringify({\n                    status: ytStatus,\n                    niconico: niconicoURL,\n                    twitter: twitterURL,\n                    aliases: ytAliases\n                }),\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization' : 'Bearer ' + token},\n                mode: 'cors'\n            })\n            .then(res => setRequestingRefresh(!requestingRefresh));\n        }\n    }\n\n\n    function refreshYTStats(e) {\n        e.preventDefault();\n        if(props.apiURL !== '') {\n            fetch(props.apiURL + '/channel/'+id+'/refresh', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization' : 'Bearer ' + token},\n                mode: 'cors'\n            })\n            .then(res => {\n                if(res.status === 200) {\n                    setRequestingRefresh(!requestingRefresh);\n                }\n                else {\n                    setYTUpdateError('This channel has already been refreshed in the last 24 hours.');\n                }\n            });\n        }\n    }\n\n    return (\n        <div className='container'>\n            \n            {/* header */}\n            <div className='row bg-light'>\n                <div className='col-12 col-lg-3 p-2'>\n                    {typeof channel === 'undefined' ? \n                    null :\n                    <img src={channel.imageurl} alt={channel.name} className='h-100 w-100 rounded-circle text-center'></img>}\n                </div>\n                <div className='bg-light col-12 col-lg-8 p-3' style={{backgroundColor:'green'}}>\n                    {typeof channel === 'undefined' ?  \n                        <div className=\"spinner-border text-success\" role=\"status\">\n                            <span className=\"visually-hidden\">Loading...</span>\n                        </div>\n                        : \n                        <div>\n                            <h1>{channel.name}</h1>\n                            {typeof channel.aliases !== 'undefined' && channel.aliases !== channel.name && channel.aliases !== '' ? <p className='fs-4'>Also Known As: {channel.aliases}</p> : null}\n                            <p>Status: {channel.status}</p>\n                            {typeof channel === 'undefined' ? null :\n                                <div>\n                                    <p># Channel Views: {channel.viewcount}</p>\n                                    <p># Uploaded Videos: {channel.videocount}</p>\n                                </div>\n                            }\n                            \n                            <div className='socials'>\n                                {typeof channel !== 'undefined' && typeof channel.twitter !== 'undefined' && channel.twitter !== '' ?  \n                               <a href={'https://twitter.com/'+channel.twitter} target=\"_blank\" rel=\"noopener noreferrer\" ><FaTwitter size='2em'/></a>\n                               :\n                                null\n                               }\n                               {typeof channel !== 'undefined' && typeof channel.niconico !== 'undefined' && channel.niconico !== '' ?\n                                <a href={'https://ch.nicovideo.jp/'+channel.niconico} target=\"_blank\" rel=\"noopener noreferrer\"><SiNiconico size='2em' color='gray'/></a>\n                                :\n                                null \n                                }\n                                <a href={'https://www.youtube.com/channel/'+channel.youtube} target=\"_blank\" rel=\"noopener noreferrer\" ><FaYoutube color='red' size='2em'/></a>\n\n                            </div>\n                        </div>\n                    }  \n                            <hr/>\n                     {props.loggedIn === true ?        \n                    <button type=\"button\" className=\"btn btn-success\" data-bs-toggle='modal' data-bs-target='#editForm'>Edit Channel Info</button>\n                     :\n                    null}<button type=\"button\" className=\"btn btn-success mx-3\" onClick={(e) => refreshYTStats(e)}>Refresh YouTube Stats</button>\n                    {typeof ytUpdateError !== 'undefined' && ytUpdateError !== '' ? <p className='mt-3' style={{color:'red', marginBottom:'0'}}>{ytUpdateError}</p> : null}    \n                </div>\n            </div>\n\n            <div className='row mt-3'>\n            <div className='bg-light col-12  p-3' style={{backgroundColor:'green'}}>\n                <div>\n                <p className='fs-2 text-center'>Tags</p>\n                <hr/>\n                {allTags.length > 0 ? \n                <form className='mt-3 mb-3' onSubmit={(e) => addTag(e)}>\n                    <label htmlFor='tag'></label>\n                    <input list='tags' name='tag' id='tag'/>\n                    <datalist id='tags'>\n                        {allTags.map((value, index) => {\n                            return <option key={value._id} data-tag-id={value._id} value={value.name}></option>\n                        })}\n                    </datalist>\n                    <button type=\"submit\" className=\"btn btn-success\">Add Tag</button>\n                </form>\n                : null}\n                {channelTags.length > 0 ? \n                channelTags.map((value, index) => {\n                    return <span className='' key={value._id}><Link to={'/tag/'+value._id+'/1'}>{value.tagname}</Link>\n                    {props.loggedIn === true ? \n                            <MdClose color='red' key={value._id} size='1.5em' cursor='pointer' onClick={e => deleteTag(e, value._id)}/>\n                            :\n                            (index + 1) !== channelTags.length ?\n                            <span key={value._id}>, </span>\n                            :\n                            null\n                    }\n                    </span>\n                })\n                : null}\n                </div>\n            </div>\n            </div>\n\n\n            {/* stats */}\n            <div className='row mt-3 bg-light' style={{minHeight:'25vh'}}>\n                <p className='text-center pt-3 fs-3 mb-0'>Statistics</p><hr/>\n                <div className='col-12 col-lg-6 p-3'>\n                    {ratersList.length > 0 ? \n                        <div>\n                            <p className='text-center'>Ratings</p>\n                            {ratersList.map((value, index) => {\n                                return (\n                                    <div key={`review-count-${index}`}>\n                                        \n                                        <div className=\"progress mt-3\" style={{height:'1.7em'}}>\n                                            <p>{index}:</p>\n                                            <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${value / Math.max(...ratersList) * 100}%`}} aria-valuenow={value} aria-valuemin=\"0\" aria-valuemax={Math.max(...ratersList)}>{value}</div>\n                                        </div>\n                                    </div>\n                                )\n                            })}\n                        </div> \n                        : null}\n                        <hr/>\n                    <div className='text-center'>\n                        <p className='mt-3'>Average Rating: {rating === 10 ? rating : rating.toFixed(1)}/10 (votes: {numberOfRaters})</p>\n\n                        <p>Your Rating: {typeof personalReviewData === 'undefined' || personalReviewData === -1 ?\n                        '-' : \n                        <span>{personalReviewData.rating}<MdClose cursor='pointer' color='red' size='1.5em' onClick={() => deleteReview()}/></span>}</p> \n\n                        <button type=\"button\" className=\"btn btn-success\" data-bs-toggle='modal' data-bs-target='#reviewForm'>\n                        {typeof personalReviewData === 'undefined' || personalReviewData === -1 ? 'Add Review' : 'Edit Review'}</button>\n\n\n                    </div>\n\n                        \n                </div>\n                \n                <div className='col-12 col-lg-6 d-flex flex-column align-items-center p-3'>\n                    <p>Recent Reviews</p>\n                    {reviewList.length > 0 ? \n                    reviewList.map((value, index) => {\n                       return <p key={`latest-reviews-${index}`} style={{cursor:'pointer', color:'blue'}} data-bs-toggle='modal' \n                       data-bs-target='#reviewShow' onClick={() => setUserReviewData([value.review, value.rating, value.raterid.username])}>\n                           {value.raterid.username} {value.rating}/10 - {DateTime.fromISO(value.date).toFormat('yyyy LLL dd')}</p>\n                    })\n                    : <p>None</p>}\n                </div>\n            </div>\n\n            {/* Modal Specific Review */}\n            <div className=\"modal fade\" id=\"reviewShow\" tabIndex=\"-1\" aria-labelledby=\"reviewShowLabel\" aria-hidden=\"true\">\n                <div className=\"modal-dialog\">\n                    <div className=\"modal-content\">\n                    <div className=\"modal-header\">\n                        <h5 className=\"modal-title\" id=\"reviewShowLabel\">{userReviewData[2]}'s review <br/>{userReviewData[1]}/10</h5>\n                        <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                    </div>\n                    <div className=\"modal-body\">\n                        <p>{typeof userReviewData[0] !== 'undefined' ? userReviewData[0] : 'User did not write a review.'}</p>\n                    </div>\n                    <div className=\"modal-footer\">\n                        <button type=\"button\" className=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n                    </div>\n                    </div>\n                </div>\n            </div>\n\n\n            {/* Modal Review */}\n            <div className=\"modal fade\" id=\"reviewForm\" tabIndex=\"-1\" aria-labelledby=\"reviewFormLabel\" aria-hidden=\"true\">\n                <div className=\"modal-dialog\">\n                    <div className=\"modal-content\">\n                    <div className=\"modal-header\">\n                        <h5 className=\"modal-title\" id=\"reviewFormLabel\">Review</h5>\n                        <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                    </div>\n                    <div className=\"modal-body\">\n                        <form onSubmit={(e) => submitReview(e)}>\n                            <div className=\"mb-3\">\n                                <label htmlFor=\"reviewRating\" className=\"form-label\">Rating</label>\n                                <div className='input-group'>\n                                    {typeof personalReviewData === 'undefined' ? <input type=\"number\" className=\"form-control\" id=\"reviewRating\" required onChange={e => setFormRating(e.target.value)} placeholder=\"0-10\" min='0' max='10'/> : \n                                    <input type=\"number\" className=\"form-control\" id=\"reviewRating\" required onChange={e => setFormRating(e.target.value)} placeholder=\"7\" defaultValue={personalReviewData.rating} min='0' max='10'/>}\n                                    \n                                    <span className=\"input-group-text\" id=\"basic-addon2\">/10</span>\n                                </div>\n                            </div>\n                            <div className=\"mb-3\">\n                                <label htmlFor=\"reviewText\" className=\"form-label\">Review</label>\n                                {typeof personalReviewData === 'undefined' ? <textarea className=\"form-control\" id=\"reviewText\" onChange={e => setFormReview(e.target.value)} rows=\"3\" placeholder='optional' maxLength='1000'></textarea> : \n                                <textarea className=\"form-control\" id=\"reviewText\" onChange={e => setFormReview(e.target.value)} rows=\"3\" placeholder='optional' defaultValue={personalReviewData.review} maxLength='1000'></textarea>}\n                                \n                            </div>\n                            <button type=\"submit\" className=\"btn btn-primary mt-3 float-end\" >Post Review</button>\n                        </form>\n                    </div>\n                    <div className=\"modal-footer\">\n                        <button type=\"button\" className=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n                    </div>\n                    </div>\n                </div>\n            </div>\n\n\n\n            {/* Modal Edit */}\n            <div className=\"modal fade\" id=\"editForm\" tabIndex=\"-1\" aria-labelledby=\"editFormLabel\" aria-hidden=\"true\">\n                <div className=\"modal-dialog\">\n                    <div className=\"modal-content\">\n                    <div className=\"modal-header\">\n                        <h5 className=\"modal-title\" id=\"reviewFormLabel\">Info</h5>\n                        <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                    </div>\n                    <div className=\"modal-body\">\n                        <form onSubmit={(e) => sendChannelEdits(e)}>\n                        <label htmlFor='status'>YouTube Status:</label>\n                            <select className=\"form-select\" aria-label=\"Activity Select\" required id='status' value={ytStatus} onChange={e => setYTStatus(e.target.value)}>\n\n                                <option value=\"Active\">Active</option>\n                                <option value=\"Inactive\">Inactive</option>\n                                <option value=\"Unknown\">Unknown</option>\n                            </select>\n\n\n                            <label htmlFor=\"twitter\" className=\"form-label\">Twitter:</label>\n                            <div className=\"input-group mb-3\">\n                                <span className=\"input-group-text\" id=\"basic-addon3\">@</span>\n                                {typeof twitterURL !== 'undefined' ? \n                                <input type=\"text\" className=\"form-control\" id=\"twitter\" aria-describedby=\"basic-addon3\" defaultValue={twitterURL} onChange={e => setTwitterURL(e.target.value)}/>\n                                :    \n                                <input type=\"text\" className=\"form-control\" id=\"twitter\" aria-describedby=\"basic-addon3\" onChange={e => setTwitterURL(e.target.value)}/>\n                            }\n                            </div>\n\n\n                            <label htmlFor=\"nnd\" className=\"form-label\">Niconico:</label>\n                            <div className=\"input-group mb-3\">\n                                <span className=\"input-group-text\" id=\"basic-addon3\">https://ch.nicovideo.jp/</span>\n                                {typeof niconicoURL !== 'undefined' ?\n                                <input type=\"text\" className=\"form-control\" id=\"nnd\" aria-describedby=\"basic-addon3\" defaultValue={niconicoURL} onChange={e => setNiconicoURL(e.target.value)}/>\n                                :\n                                <input type=\"text\" className=\"form-control\" id=\"nnd\" aria-describedby=\"basic-addon3\" onChange={e => setNiconicoURL(e.target.value)}/>\n                                }\n                            </div>\n\n\n                            <label htmlFor='alias' className='form-label'>Aliases:</label>\n                            {typeof ytAliases !== 'undefined' ? \n                            <textarea className='form-control' id='alias' rows='3' defaultValue={ytAliases} onChange={e => setYTAliases(e.target.value)}></textarea>\n                            : <textarea className='form-control' id='alias' rows='3' onChange={e => setYTAliases(e.target.value)}></textarea>}\n                            <button type=\"submit\" className=\"btn btn-primary mt-3 float-end\" >Submit Changes</button>\n\n                        </form>\n                    </div>\n                    <div className=\"modal-footer\">\n                        <button type=\"button\" className=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n                    </div>\n                    </div>\n                </div>\n            </div>\n\n\n\n\n            {/* comment section */}\n            <div className='row mt-3 mb-3'>\n                <div className='col-12 bg-light' style={{backgroundColor:'green'}}>\n                    <form onSubmit={postComment}>\n                        <label htmlFor='comment-form' className='form-label mt-3'>Add a comment</label>\n                        <textarea className='form-control mb-3' id='comment-form' rows='3' onChange={e => setComment(e.target.value)}/>\n                        <button type='submit' className='btn btn-primary'>Submit</button>\n                    </form>\n                    <hr/>\n                    <p className='fs-2 text-center'>Comments</p>\n                    <div className='comment-area'>\n                        {typeof commentList !== 'undefined' && commentList.length > 0 ? \n                        commentList.map((value, index) => {\n                            return  <div key={value.authorid._id + index}>\n                                        <p className='fs-2 fw-bold'>{value.authorid.username}<span className='fs-5 fw-normal'> {DateTime.fromISO(value.date).toFormat('yyyy LLL dd')}</span>\n                                        \n                                        {typeof userid !== 'undefined' && value.authorid._id === userid ? <MdClose color='red' cursor='pointer' size='1.3em' style={{float: 'right'}} onClick={()=> deleteComment(value._id, value.authorid._id)}/>: null}</p>\n                                        <p className='fs-5' style={{whiteSpace: \"pre-wrap\"}}>{value.comment}</p>\n                                        {index !== commentList.length - 1 ? <hr/> : null}\n                                    </div>  \n                        })\n                        : <p>No comments</p>}\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Channel;","import { useEffect, useState } from \"react\";\nimport { Redirect } from \"react-router\";\n\nconst ChannelForm = (props) => {\n    const [status, setStatus] = useState('Active');\n    const [niconico, setNiconico] = useState('');\n    const [youtube, setYoutube] = useState();\n    const [twitter, setTwitter] = useState();\n    const [redirecting, setRedirecting] = useState(false);\n    const [redirectURL, setRedirectURL] = useState('');\n    const [token, setToken] = useState('');\n    const [errors, setErrors] = useState(false);\n\n    useEffect(() => {\n        document.title = 'Channel Form | ASMRdb';\n        if(localStorage.getItem('token') !== null) {\n            setToken(localStorage.getItem('token'));\n        }\n\n    }, [])\n\n    function addChannel(e) {\n        e.preventDefault();\n        if(props.apiURL !== '' && token !== '') {\n            fetch(props.apiURL+'/channel', {\n                method: 'POST',\n                mode:'cors',\n                body: JSON.stringify({status, niconico, youtube, twitter}),\n                headers: { 'Content-Type': 'application/json',\n                'Authorization' : 'Bearer ' + token },\n            })\n            .then(res => {\n                if(res.status !== 400) {\n                    return res.json()\n                }\n                else {\n                    setErrors(true);\n                }\n            })\n            .then(res => {\n                if(typeof res !== 'undefined') {\n                    setRedirectURL('/channel/'+res.channelid[0]._id);\n                }\n            });\n        }\n    }\n\n    useEffect(() => {\n        if(redirectURL !== '') {\n            setRedirecting(true);\n        }\n    }, [redirectURL]);\n\n\n\n    return (\n        <div className='container'>\n            {props.loggedIn !== true ? <Redirect to={'/login'}/> : null}\n            {redirecting === true ? <Redirect to={redirectURL}/>: null}\n            <div className='row d-flex justify-content-center mb-3'>\n                <div className='col-12 col-lg-6 bg-light p-2'>\n                    <h1 className='text-center'>Channel Form</h1>\n                    <form onSubmit={e => addChannel(e)}>\n                        <label htmlFor=\"youtube-url\" className=\"form-label\">YouTube URL</label>\n                        <div className=\"input-group mb-3\">\n                            <span className=\"input-group-text\" id=\"basic-addon3\">https://www.youtube.com/channel/</span>\n                            <input type=\"text\" required className=\"form-control\" id=\"youtube-url\" aria-describedby=\"basic-addon3\" onChange={e=>setYoutube(e.target.value)}/>\n                        </div>\n\n\n\n\n                        <label htmlFor='status'>YouTube Status:</label>\n                        <select className=\"form-select\" aria-label=\"Activity Select\" required id='status' onChange={e => setStatus(e.target.value)}>\n                            <option value=\"Active\">Active</option>\n                            <option value=\"Inactive\">Inactive</option>\n                            <option value=\"Unknown\">Unknown</option>\n                        </select>\n\n\n                        <hr/>\n                        <p>Optional Socials:</p>\n\n\n\n\n                        <label htmlFor=\"twitter\" className=\"form-label\">Twitter:</label>\n                        <div className=\"input-group mb-3\">\n                            <span className=\"input-group-text\" id=\"basic-addon3\">@</span>\n                            <input type=\"text\" className=\"form-control\" id=\"twitter\" aria-describedby=\"basic-addon3\" onChange={e => setTwitter(e.target.value)}/>\n                        </div>\n\n\n                        <label htmlFor=\"nnd\" className=\"form-label\">Niconico:</label>\n                        <div className=\"input-group mb-3\">\n                            <span className=\"input-group-text\" id=\"basic-addon3\">https://ch.nicovideo.jp/</span>\n                            <input type=\"text\" className=\"form-control\" id=\"nnd\" aria-describedby=\"basic-addon3\" onChange={e => setNiconico(e.target.value)}/>\n                        </div>\n                        <button type=\"submit\" className=\"btn btn-success mt-3\">Add Channel</button>\n                    </form>\n                    {errors === true ? \n                    <div className='mt-3'>\n                        <p>Something went wrong. Please make sure your input only contains:</p>\n                        <ul>\n                            <li>numbers and letters (a - z, A - Z, 0 - 9)</li>\n                            <li>spaces, underscores, and dashes ( , _, -)</li>\n                        </ul>\n                        </div> : null}\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default ChannelForm;","import {Link} from 'react-router-dom';\n\nconst ChannelList = (props) => {\n    return (\n        <div className='container'>\n            <div className='row bg-light p-2 mb-4'>\n                <div className='col'>\n                    <h1 className='text-center'>{props.title}\n                    {typeof props.totalresults !== 'undefined' && props.totalresults !== '' ? <span className='fs-5'> ~{props.totalresults} result(s) found</span> : null}</h1>\n                    <hr/> \n                    {props.channels.length > 0 ? \n                        props.channels.map((value, index) => {\n                            return (          \n                                    <div className='lh-1' key={value._id}>\n                                        <div className='channel d-flex'>\n                                        <img src={value.imageurl} alt={value.name}></img>\n                                        <div className='mx-3'>\n                                            <Link to={'/channel/'+value._id}>  \n                                                <p className='fs-4 fw-bold'>{value.name}</p>\n                                            </Link> \n                                            <p>Videos: {value.videocount}</p>\n                                            <p>Tags: {value.tags.map((tagvals, index) => {\n                                                return (\n                                                    <span key={tagvals._id}>{tagvals.tagname}{index + 1 !== value.tags.length ? ', ' : ' '}</span>\n                                                )\n                                            })}</p>\n                                        </div>\n                                        </div>\n                                    {index + 1 !== props.channels.length ? <hr/> : null}\n                                    </div>\n                            )\n                        })\n                    :\n                    <div>\n                        <p>No matches found</p>\n                    </div>\n                    }\n                </div>\n            </div>\n\n\n        <nav aria-label=\"Page navigation example\">\n        <ul className=\"pagination justify-content-center\">\n            {\n                props.startpos === '1' ?\n                <li className=\"page-item disabled\" >\n                <Link className=\"page-link\" to={`${props.pageurl}${parseInt(props.startpos) - 1}`} tabIndex=\"-1\" aria-disabled=\"true\">&lt;&lt;</Link>\n                </li> :\n                <li className=\"page-item\">\n                <Link className=\"page-link\" to={`${props.pageurl}${parseInt(props.startpos) - 1}`} tabIndex=\"-1\" aria-disabled=\"true\">&lt;&lt;</Link>\n                </li>\n            }{\n                props.startpos === '1' ? \n                <li className=\"page-item\" ><Link className=\"page-link\" style={{background: \"#0d6efd\", color:\"#fff\"}} to={`${props.pageurl}1`}>1</Link></li> :\n                <li className=\"page-item\"><Link className=\"page-link\" to={`${props.pageurl}1`}>1</Link></li>\n            }\n            {props.pages >= 2 ? \n            [...Array(props.pages)].map((value, ind) => {\n                if(ind === 0) return null;\n                return (\n                    ind + 1=== parseInt(props.startpos) ? \n                        <li className=\"page-item\" \n                        key={ind}><Link className=\"page-link\" to={`${props.pageurl}${ind + 1}`} style={{background: \"#0d6efd\", color:\"#fff\"}}>{ind + 1}</Link></li> : \n\n                        <li className=\"page-item\" \n                        key={ind}><Link className=\"page-link\" to={`${props.pageurl}${ind + 1}`}  >{ind + 1}</Link></li>\n                )\n            })\n            :\n            null\n            }\n            {\n                parseInt(props.startpos) + 1 <= props.pages ?\n                <li className=\"page-item\">\n                <Link className=\"page-link\" to={`${props.pageurl}${parseInt(props.startpos) + 1}`}>&gt;&gt;</Link>\n                </li>\n                :\n                <li className=\"page-item disabled\">\n                <Link className=\"page-link\" to={`${props.pageurl}${parseInt(props.startpos) + 1}`} tabIndex=\"-1\" aria-disabled=\"true\">&gt;&gt;</Link>\n                </li>\n            }\n        </ul>\n        </nav>\n\n        </div>\n    )\n}\n\nexport default ChannelList;","import { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport ChannelList from './channellist';\n\nconst Channels = (props) => {\n    const [channels, setChannels] = useState([]);\n    const [totalChannels, setTotalChannels] = useState(0);\n    const [pages, setPages] = useState();\n    let {startpos} = useParams();\n\n    useEffect(() => {\n        document.title = 'Channels | ASMRdb';\n        if(props.apiURL !== '' && typeof startpos !== 'undefined') {\n            fetch(props.apiURL+'/channel/limit/'+startpos,{\n                method: 'GET',\n                mode: 'cors'\n            })\n            .then(res => {\n                if(res.status !== 400) {\n                    return res.json();\n                }\n            })\n            .then(res => {\n                if(typeof res === 'undefined') {return;}\n                setChannels(res.channels)\n                setTotalChannels(res.totalchannels);\n                let estimatedPages = Math.ceil(res.totalchannels / 40.0);\n                if(estimatedPages <= 0) {\n                    setPages(1);\n                }\n                else {\n                    setPages(estimatedPages);\n                }\n            }   \n            );\n        }\n    }, [props.apiURL, startpos])\n\n    return (\n        <div>\n        <ChannelList channels={channels} title={'Channels'} totalresults={totalChannels} startpos={startpos} pages={pages} pageurl={'/channels/'}/>\n            \n        </div>\n    )\n}\n\nexport default Channels;","import {useState} from 'react';\nimport { Redirect } from 'react-router-dom';\n\nfunction Login(props) {\n    const [email, setEmail] = useState(\"\");\n    const [username, setUsername] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [passwordRepeat, setPasswordRepeat] = useState(\"\");\n    const [errorList, setErrorList] = useState([]);\n    const [accountCreated, setAccountCreated] = useState(false);\n\n\n\n    function register(e){\n        if(props.apiURL !== '') {\n            e.preventDefault();\n            if(passwordRepeat === password) {\n                fetch(props.apiURL + '/user', {\n                    method: 'POST',\n                    body: JSON.stringify({username:username, email: email, password: password, passwordRepeat: passwordRepeat}),\n                    headers: { 'Content-Type': 'application/json' },\n                    mode: 'cors'\n                })\n                .then(res => {\n                    if(res.status === 200) {\n                        setAccountCreated(true);\n                        return;\n                    }\n                    return res.json();\n                })\n                .then(res => {\n                    if(typeof res === 'undefined') {\n                        return;\n                    }\n                    if(typeof res.errors !== 'undefined' || res.errors.length > 0) {\n                        setErrorList(res.errors);\n                    }\n                    else {\n                        setAccountCreated(true);\n                    }\n                });\n            }\n            else { \n                setErrorList(['Passwords do not match.']);\n            }\n        }\n\n        \n    }\n\n\n    return(\n    <div className='container'>\n        {accountCreated === true ? <Redirect push to='/login'/> : null}\n        {props.loggedIn === true ? <Redirect push to='/'/> : null}\n        <div className='row justify-content-center'>\n            <div className='col-12 col-lg-6 bg-light p-4'>\n            <h1 className='text-center'>Register</h1>\n                <form onSubmit={register}>\n                    <div className='mb-3'>\n                        <label htmlFor='username' className='form-label'>Username</label>\n                        <input type='string' className='form-control' id='username' required\n                            onChange={e => setUsername(e.target.value)}/>\n                    </div>\n\n                    <div className='mb-3'>\n                        <label htmlFor='email' className='form-label'>Email Address</label>\n                        <input type='email' className='form-control' id='email'  required\n                            onChange={e => setEmail(e.target.value)}/>\n                    </div>\n                    <div className='mb-3'>\n                        <label htmlFor='password' className='form-label'>Password</label>\n                        <input type='password' className='form-control' id='password' required\n                            onChange={e=>setPassword(e.target.value)}/>\n                    </div>\n                    <div className='mb-3'>\n                        <label htmlFor='passwordrepeat' className='form-label'>Password Repeated</label>\n                        <input type='password' className='form-control' id='passwordrepeat' required\n                            onChange={e=>setPasswordRepeat(e.target.value)}/>\n                    </div>\n                    <button type='submit' className='btn btn-primary'>Submit</button>\n                    {errorList.length > 0 ? \n                        <div className='text-center mt-3'>\n                            {errorList.map((value, index) => {\n                                return <p key={index} className='text-danger'>{value}</p>\n                            })}\n                        </div>\n                    : null}\n                </form>\n            </div>\n        </div>\n    </div>)\n}\n\nexport default Login;","import { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst Homepage = (props) => {\n    const [channels, setChannels] = useState([]);\n    const [tags, setTags] = useState([]);\n    const [reviews, setReviews] = useState([]);\n    const [stats, setStats] = useState([]);\n\n    useEffect(() => {\n        document.title = 'ASMRdb';\n    }, []);\n\n    useEffect(() => {\n        if(props.apiURL !== '') {\n            fetch(props.apiURL+'/channel/latest', {\n                method:\"GET\",\n                mode:'cors'\n            })\n            .then( res => res.json())\n            .then( res => setChannels(res.channels));\n\n\n\n            fetch(props.apiURL+'/tag/latest', {\n                method:\"GET\",\n                mode:'cors'\n            })\n            .then( res => res.json())\n            .then( res => setTags(res.tags));\n\n\n\n            fetch(props.apiURL+'/channelrating/latest', {\n                method:\"GET\",\n                mode:'cors'\n            })\n            .then( res => res.json())\n            .then( res => setReviews(res.reviews));\n\n            fetch(props.apiURL+'/statistics', {\n                method:\"GET\",\n                mode:'cors'\n            })\n            .then( res => res.json())\n            .then( res => setStats(res));\n        }\n    }, [props.apiURL])\n\n    return (\n        <div className='container'>\n            <div className='row bg-light mb-3 p-2'> \n                <h1>ASMR Database</h1>\n                <hr/>\n                <p>The goal of ASMRdb.net is to document all ASMR YouTubers. <br/>By collecting them all in one place, ASMR enthusiasts will have an easier time looking for new channels to listen to. This website is built as a wiki, so feel free to add channels, tags, and join in on discussions.</p>\n            </div>\n\n            <div className='row bg-light mb-3 p-2'>\n                <div className='col-12'>\n                    <h2 className='text-center'>Recently Added</h2>\n                    <hr/>\n                    {channels.length > 0 ? \n                    <div className='row'>\n                    {channels.map((value) => {\n                        return (        \n                            <Link to={'/channel/'+value._id} key={value._id} className='col-4' style={{textDecoration:'none', color:'black'}}>   \n                                <div className='card h-100'>\n                                    <img src={value.imageurl} className=\"card-img-top\" alt={value.name}></img> \n                                    <div className=\"card-body\">\n                                        <h5 className=\"card-title\">{value.name}</h5>\n                                        <p className=\"card-text\">Videos: {value.videocount}</p>\n                                        {\n                                            typeof value.tags !== 'undefined' && value.tags.length > 0 ?\n                                                <p>\n                                                    {value.tags.map((val, ind) => {\n                                                        return <span key={val._id}>{val.tagname}{ind + 1 !== value.tags.length ? ', ' : ' '}</span>\n                                                    })}\n                                                </p>\n                                                :\n                                                null\n                                        }\n                                        \n                                    </div>\n                                </div>\n                            </Link>\n                        )\n                    })}\n                    </div>\n                    : \n                    <div className=\"spinner-border text-success\" role=\"status\">\n                        <span className=\"visually-hidden\">Loading...</span>\n                    </div>}\n                </div>\n            </div>\n\n            <div className='row bg-light p-2 mb-3'>\n                <div className='col-12 col-lg-4'>\n                    <h2 className='text-center'>Latest Tags</h2>\n                    <hr/>\n                        {tags.length > 0 ? \n                            tags.map((value) => {\n                                return (\n                                <Link key={value._id} to={'/tag/' +value._id +'/1'}>\n                                    <p>{value.name}</p>\n                                </Link>\n                                )\n                            })\n                        :  \n                        <div className=\"spinner-border text-success\" role=\"status\">\n                            <span className=\"visually-hidden\">Loading...</span>\n                        </div>\n                        }\n                </div>\n                <div className='col-12 col-lg-4 text-center '>\n                    <h2>Latest Reviews</h2>\n                    <hr/>\n                    {reviews.length > 0 ? \n                    reviews.map(value => {\n                        return (\n                            <div key={value._id}>\n                                <p className='text-start'><Link to={'/channel/'+value.channelid._id}>{value.channelid.name}</Link> - {value.rating}/10</p>\n                            </div>\n                        )\n                    })\n                    :\n                    null}\n                </div>\n                <div className='col-12 col-lg-4'>\n                    <h2 className='text-center'>Statistics</h2>\n                    <hr/>\n                    {typeof stats !== 'undefined' ?\n                        <div>\n                            <p>Users: {stats.users}</p>\n                            <p>Channels: {stats.channels}</p>\n                            <p>Tags: {stats.tags}</p>\n                            <p>Reviews: {stats.reviews}</p>\n                        </div>\n                    :\n                    <div className=\"spinner-border text-success\" role=\"status\">\n                        <span className=\"visually-hidden\">Loading...</span>\n                    </div>\n                    }\n                </div>\n\n            </div>\n        </div>\n    )\n}\n\nexport default Homepage;","import {Link, useHistory} from \"react-router-dom\";\nimport React, { useState } from \"react\";\nimport {FaSearch} from 'react-icons/fa';\n\nconst NavBar = (props) => {\n    const [search, setSearch] = useState('');\n    const history = useHistory();\n\n    const sendSearch = (e) => {\n        e.preventDefault();\n        if(props.apiURL !== '') {\n            history.push('/search/'+search.split(' ').join('_')+'/1')\n        }\n    }\n    return (\n        <nav className='navbar navbar-light navbar-expand-md shadow mb-5' style={{backgroundColor:\"black\"}}>\n            <div className='container'>\n                <Link to='/' className='navbar-brand text-white'>Home</Link>\n\n                \n               \n\n                <div className='collapse navbar-collapse d-flex ' id='navContent-l'>\n                    <ul className='navbar-nav'>\n                        <li className='nav-item'>\n                            <Link to='/channels/1' className='nav-link text-white'>Channels</Link>\n                        </li>\n                        <li className='nav-item'>\n                            <Link to='/tags' className='nav-link text-white'>Tags</Link>\n                        </li>\n                        <li className='nav-item'>\n                            {props.loggedIn === true ? \n                            <Link to='/add' className='nav-link text-white'>Add Channel</Link>\n                            :\n                            null}\n                        </li>\n                        <li className='nav-item'>\n                            <Link to='/boards' className='nav-link text-white'>Discussion</Link>\n                        </li>\n                    </ul>\n                </div>\n\n                <button className='navbar-toggler' type='button' data-bs-toggle='collapse' data-bs-target='#navContent-r' aria-controls='navContent-r' aria-expanded='false' aria-label='Toggle navigation'>\n                    <span className='navbar-toggler-icon'></span>\n                </button>\n                <div className='collapse navbar-collapse d-flex justify-content-end' id='navContent-r'>\n                    <ul className='navbar-nav'>\n                        <form className=\"form-inline my-2 my-lg-0 d-flex\" onSubmit={e => sendSearch(e)}>\n                            <input className=\"form-control mr-sm-2 rounded-start\" type=\"text\" onChange={(e) => setSearch(e.target.value)} name='query' placeholder=\"Search...\" aria-label=\"Search\"/>\n                            <button className=\"btn btn-outline-success my-2 my-sm-0\" style={{backgroundColor:'darkGreen'}} ><FaSearch onClick={e => sendSearch(e)} color='black'/></button>\n                        </form>\n                        {!props.loggedIn ? <li className='nav-item'><Link to='/login' className='nav-link text-white'>Login</Link></li> : <li onClick={() => props.setLogin(false)} className='nav-item nav-link text-white' style={{cursor:'pointer'}}>Log Out</li>}\n                    </ul>\n                </div>\n\n            </div>\n        </nav>\n    )\n}\n\nexport default NavBar;","import { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport ChannelList from './channellist';\n\nconst Tag = (props) => {\n    let {id, startpos} = useParams();\n    const [channels, setChannels] = useState([]);\n    const [tag, setTag] = useState();\n    const [totalChannels, setTotalChannels] = useState(0);\n    const [pages, setPages] = useState();\n\n    useEffect(() => {\n        if(props.apiURL !== '') {\n            fetch(props.apiURL+'/tag/'+id+'/channels/'+startpos, {\n                method: 'GET',\n                mode:'cors'\n            })\n            .then(res => res.json())\n            .then(res => {\n                setChannels(res.channels); \n                setTotalChannels(res.totalchannels);\n                setTag(res.tag);\n                let estimatedPages = Math.ceil(res.totalchannels / 40.0);\n                if(estimatedPages <= 0) {\n                    setPages(1);\n                }\n                else {\n                    setPages(estimatedPages);\n                }\n            });\n        }\n    }, [props.apiURL, id, startpos])\n\n    useEffect(() => {\n    }, [channels]);\n\n    useEffect(() => {\n        if(typeof tag !== 'undefined' && tag.name !== '') {\n            document.title = tag.name + \" | ASMRdb\";\n        }\n    }, [tag]);\n\n    \n\n    return (\n        <ChannelList pageurl={`/${id}/`} pages={pages} startpos={startpos} totalresults={totalChannels} channels={channels} title={typeof tag !== 'undefined' ? 'Tag: ' + tag.name : 'Tag: '}/>\n    )\n}\n\nexport default Tag;","import { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst Tags = (props) => {\n    const [newTagName, setNewTagName] = useState('');\n    const [newTagDescription, setNewTagDescription] = useState('');\n    const [newTagReason, setNewTagReason] = useState('');\n    const [token, setToken] = useState('');\n    const [approvedTags, setApprovedTags] = useState([]);\n    const [waitingTags, setWaitingTags] = useState([]);\n    const [refresh, setRefresh] = useState(false);\n\n    useEffect(() => {\n        document.title = 'Tags | ASMRdb';\n        if(localStorage.getItem('token') !== null) {\n            setToken(localStorage.getItem('token'));\n        }\n\n        if(props.apiURL !== '') {\n            fetch(props.apiURL+\"/tag\", {\n                method: 'GET',\n                mode: 'cors'\n            })\n            .then(res => res.json())\n            .then(res => {\n                setApprovedTags(res.approved.sort((a,b) => {return a.name > b.name}));\n                setWaitingTags(res.waiting);\n            })\n        }\n    }, [props.apiURL, refresh])\n\n    useEffect(() => {\n    }, [approvedTags])\n\n    function submitNewTag(e) {\n        e.preventDefault();\n        if(props.apiURL !== '') {\n            fetch(props.apiURL+\"/tag\", {\n                method: 'POST',\n                body: JSON.stringify({name: newTagName, description: newTagDescription, reason: newTagReason}),\n                headers: { 'Content-Type': 'application/json',\n                'Authorization' : 'Bearer ' + token },\n                mode: 'cors'\n            })\n            .then(res => {\n                if(res.status === 200) {\n                    setRefresh(!refresh);\n                    alert('sent');\n                }\n            })\n        }\n    }\n\n    function closeForm(e) {\n        e.preventDefault();\n            Array.from(document.querySelectorAll(\"input\")).forEach(\n                input => (input.value = \"\")\n            );\n            Array.from(document.querySelectorAll(\"textarea\")).forEach(\n                input => (input.value = \"\")\n            );\n            setNewTagName('');\n            setNewTagDescription('');\n            setNewTagReason('');\n    }\n\n    return(\n        <div className='container'>\n            <div className='row bg-light'>\n                <div className='col-12 col-lg-2 p-2 text-center'>\n                    <button type=\"button\" className=\"btn btn-success\" data-bs-toggle=\"modal\" data-bs-target=\"#tagModal\">Add A New Tag</button>\n                </div>\n                <div className='col-12 col-lg-5 p-2 text-center'>\n                    <h1>Tags</h1>\n                    <hr/>\n\n\n                    {approvedTags.length > 0 ? \n                    approvedTags.map((value, index) => {\n                        return <p key={value._id}><Link  to={'/tag/'+value._id+'/1'}>{value.name}</Link></p>\n                    })\n                    :\n                    <div className=\"spinner-border text-success\" role=\"status\">\n                        <span className=\"visually-hidden\">Loading...</span>\n                    </div>\n                    }\n                </div>\n\n                <div className='col-12 col-lg-5 p-2 text-center'>\n                    <h1>Waiting Approval</h1>\n                    <hr/>\n                    {waitingTags.length > 0 ? \n                    waitingTags.map((value, index) => {\n                        return <p key={value._id}>{value.name}</p>\n                    })\n                    :\n                    <p>None</p>\n                    }\n                </div>\n\n            </div>\n\n\n\n\n            <div className=\"modal fade\" id=\"tagModal\" tabIndex=\"-1\" aria-labelledby=\"tagModalLabel\" aria-hidden=\"true\">\n            <div className=\"modal-dialog\">\n                <div className=\"modal-content\">\n                <div className=\"modal-header\">\n                    <h5 className=\"modal-title\" id=\"tagModalLabel\">Add a Tag</h5>\n                    <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                </div>\n                <div className=\"modal-body\">\n                    <form onSubmit={(e) => submitNewTag(e)}>\n                        <div className='mb-3'>\n                            <label htmlFor='tag-name' className='form-label'>Name</label>\n                            <input type='string' className='form-control' id='tag-name' required onChange={e => setNewTagName(e.target.value)}></input>\n                        </div>\n\n                        <div className=\"mb-3\">\n                        <label htmlFor=\"tag-description\" className=\"form-label\">Description:</label>\n                        <textarea className=\"form-control\" id=\"tag-description\" rows=\"3\" onChange={e=>setNewTagDescription(e.target.value)}></textarea>\n                        </div>\n\n                        <div className=\"mb-3\">\n                        <label htmlFor=\"tag-reason\" className=\"form-label\">Reasoning for adding:</label>\n                        <textarea className=\"form-control\" id=\"tag-reason\" rows=\"3\" onChange={e=>setNewTagReason(e.target.value)}></textarea>\n                        </div>\n\n                        <button type=\"button mt-3 float-end\" className=\"btn btn-primary\">Submit Tag</button>\n                    </form>\n                </div>\n                <div className=\"modal-footer\">\n                    <button type=\"button\" className=\"btn btn-secondary\" data-bs-dismiss=\"modal\" onClick={(e) => closeForm(e)}>Close</button>\n                </div>\n                </div>\n            </div>\n            </div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n        </div>\n    )\n}\n\nexport default Tags;","const User = () => {\n    return (\n        <div className='container'>\n            <div className='row'>\n                <div className='col-12 bg-light'>\n                    <p>AHHHHHH</p>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default User;","import { useEffect, useState } from \"react\";\nimport {Link} from 'react-router-dom';\n\nconst Boards = (props) => {\n    const [boards, setBoards] = useState([]);\n\n    useEffect(() => {\n        if(props.apiURL === '') return;\n        fetch(props.apiURL+'/board', {\n            method:'GET',\n            mode:'cors'\n        })\n        .then(res => res.json())\n        .then(res => {\n            if(typeof res !== 'undefined') {\n                setBoards(res.boards);\n            }\n        })\n    }, [props.apiURL]);\n\n    return (\n        <div className='container'>\n            <div className='row'>\n                <div className='col-12 bg-light text-center p-3'>\n                    <h1>Boards</h1>\n                    <hr/>\n                    {boards.length > 0 ? \n                    \n                    boards.map((value, index) => {\n                        return (<Link key={value._id} to={'/board/'+value._id} className='fs-3' style={{textDecoration:'none'}}><p>{value.name}</p></Link>)\n                    })\n                    \n                    : \n\n                    <div className=\"spinner-border text-success\" role=\"status\">\n                        <span className=\"visually-hidden\">Loading...</span>\n                    </div>}\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Boards;","import {useState, useEffect} from 'react';\nimport {useParams} from 'react-router-dom';\nimport {DateTime} from 'luxon'\nimport {FaRegTrashAlt} from 'react-icons/fa';\n\nconst Thread = (props) => {\n    const {id} = useParams();\n    const [userId, setUserId] = useState();\n    const [token, setToken] = useState();\n    const [threadData, setThreadData] = useState();\n    const [commentsList, setCommentsList] = useState([]);\n    const [comment, setComment] = useState('');\n    const [refresh, setRefresh] = useState(false);\n    const [threadText, setThreadText] = useState('');\n\n    useEffect(() => {\n        if(localStorage.getItem('token') !== null) {\n            setToken(localStorage.getItem('token'));\n        }\n        if(localStorage.getItem('id') !== null) {\n            setUserId(localStorage.getItem('id'));\n        }\n    }, []);\n\n    useEffect(() => {\n        if(props.apiURL === '') return;\n\n        fetch(props.apiURL +'/thread/'+id, {\n            method: 'GET',\n            mode:'cors'\n        }).then(res => res.json())\n        .then(res => {\n            if(typeof res !== 'undefined') {\n                setThreadData(res.threaddata);\n                setCommentsList(res.comments);\n                setThreadText(res.threaddata.comment);\n            }\n        })\n\n    }, [props.apiURL, id, refresh]);\n\n    const addReplyToComment = (text) => {\n        setComment(comment + '@' + text +'\\n');\n    }\n\n    const deletePost = (e) => {\n        if(props.apiURL === '') return;\n        fetch(props.apiURL +'/thread/'+id, {\n            method: 'DELETE',\n            mode:'cors',\n            headers: { 'Authorization' : 'Bearer ' + token },\n        }).then(res => setRefresh(!refresh))\n    }\n\n    const updatePostText = (e, text) => {\n        if(props.apiURL === '') return;\n\n        fetch(props.apiURL +'/thread/'+id, {\n            method: 'PUT',\n            mode:'cors',\n            body: JSON.stringify({comment:threadText}),\n            headers: { 'Content-Type': 'application/json',\n            'Authorization' : 'Bearer ' + token },\n        }).then(res => setRefresh(!refresh))\n    }\n\n    const submitComment = (e) => {\n        e.preventDefault();\n        if(props.apiURL === '') return;\n        fetch(props.apiURL +'/thread/'+id+'/comment', {\n            method:'POST', \n            mode:'cors',\n            body: JSON.stringify({comment:comment}),\n            headers: { 'Content-Type': 'application/json',\n            'Authorization' : 'Bearer ' + token }\n        }).then(res => setRefresh(!refresh))\n    }\n\n    const deleteComment = (commentid) => {\n        if(props.apiURL === '') return;\n        fetch(props.apiURL + '/thread/'+id+'/comment/'+commentid, {\n            method:'DELETE',\n            mode:'cors',\n            headers: { 'Content-Type': 'application/json',\n            'Authorization' : 'Bearer ' + token }\n        }).then(res => setRefresh(!refresh))\n    }\n\n    return (\n        <div className='container'>\n            <div className='row'>\n                <div className='col-12 bg-light p-3'>\n\n\n                    {typeof threadData !== 'undefined' ? \n                        <div className='lh-1'>\n                            <h1>{threadData.title}</h1>\n                            <p className='mb-2'>Posted by {typeof threadData.author !== 'undefined' ? threadData.author.username: 'DELETED'} on {DateTime.fromISO(threadData.date).toFormat('yyyy LLL dd')}</p>\n                            {typeof threadData.comment !== 'undefined' ? <p className='fs-3' style={{whiteSpace: \"pre-wrap\"}}>{threadData.comment}</p> : null}\n                            {typeof threadData.author !== 'undefined' && threadData.author._id === userId ? \n                            <p><span style={{color:'blue', cursor:'pointer'}} data-bs-toggle=\"modal\" data-bs-target=\"#editCommentModal\">Edit</span> <span style={{color:'blue', cursor:'pointer'}} className='mx-5' onClick={(e) => deletePost(e)}>Delete</span></p>\n                            :\n                            null\n                            } \n                        </div>\n                    \n                    \n                    : <p>Loading...</p>}\n\n                    <hr/>\n                    \n                    \n                    {props.loggedIn === true ? \n                        <form>\n                            <div className=\"mb-3\">\n                                <label htmlFor=\"commentFormTextArea\" className=\"form-label\">Comment</label>\n                                \n                                {comment.length > 0 ?\n                                <textarea className=\"form-control\" id=\"commentFormTextArea\" rows=\"3\" value={comment} onChange={(e) => setComment(e.target.value)}></textarea>\n                                :\n                                <textarea className=\"form-control\" id=\"commentFormTextArea\" rows=\"3\" onChange={e => setComment(e.target.value)}></textarea>\n                                }\n                            </div>\n                            <button type=\"button\" className=\"btn btn-primary\" onClick={e => submitComment(e)}>Submit</button>\n                        <hr/>\n                        </form>\n                    :\n                    null\n                    }\n                    {commentsList.length > 0 ? \n                        commentsList.map((value, index) => {\n                            return (\n                                <div key={value._id} style={{backgroundColor:'lightgray', paddingRight:'0'}} className={index + 1 !== commentsList.length ? 'p-3 mb-2 lh-lg' : 'p-3 lh-lg'}>\n                                    <p className='mb-0'>Posted by {typeof value.author !== 'undefined' ? value.author.username : 'DELETED'} on {DateTime.fromISO(value.date).toFormat('yyyy LLL dd')} ID: <span style={{cursor:'pointer', color:'blue'}} onClick={e => addReplyToComment(e.target.textContent)}>{value._id}</span> \n                                    {\n                                        value.author._id === userId ? \n                                        <FaRegTrashAlt color='blue' size='1.5em' cursor='pointer' onClick={e => deleteComment(value._id)}/>\n                                        :\n                                        null\n                                    }\n                                    </p>\n                                    <hr className='mt-0'/>\n                                    <p className='mb-0' style={{whiteSpace: \"pre-wrap\"}}>{value.comment}</p>\n                                </div>\n                            )\n                        })\n                    : \n                    <div style={{backgroundColor:'lightgray', paddingRight:'0'}} className='p-3'>\n                        <p className='mb-0'>No comments in this thread</p>\n                    </div>}\n                </div>\n            </div>\n\n\n                <div className=\"modal fade\" id=\"editCommentModal\" tabIndex=\"-1\" aria-labelledby=\"editCommentModalLabel\" aria-hidden=\"true\">\n                    <div className=\"modal-dialog\">\n                        <div className=\"modal-content\">\n                            <div className=\"modal-header\">\n                                <h5 className=\"modal-title\" id=\"editCommentModalLabel\">Edit Comment</h5>\n                                <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                            </div>\n                            <div className=\"modal-body\">\n                                <form>\n                                    <div className=\"mb-3\">\n                                        <label htmlFor=\"threadtextinput\" className=\"form-label\">Text:</label>\n                                        {typeof threadText !== 'undefined' && threadText.length > 0 ? \n                                        <textarea className=\"form-control\" id=\"threadtextinput\" max='10000' value={threadText} onChange={e => setThreadText(e.target.value)} rows=\"4\" ></textarea>\n                                        :\n                                        <textarea className=\"form-control\" id=\"threadtextinput\" max='10000' onChange={e => setThreadText(e.target.value)} rows=\"4\" ></textarea>\n                                        } \n                                    </div>\n                                    <button type=\"button\" className=\"btn btn-primary\" onClick={e => updatePostText(e, e.target.value)} data-bs-dismiss=\"modal\">Submit</button>\n                            </form>\n                        </div>\n                        <div className=\"modal-footer\">\n                            <button type=\"button\" className=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Thread;","import { useParams, Link, useHistory } from \"react-router-dom\";\nimport {useEffect, useState} from 'react';\nimport {DateTime} from 'luxon';\n\nconst Board = (props) => {\n    const history = useHistory();\n    const {id} = useParams();\n    const [threads, setThreads] = useState([]);\n    const [board, setBoard] = useState();\n    const [newThreadTitle, setNewThreadTitle] = useState('');\n    const [newThreadText, setNewThreadText] = useState('');\n    const [token, setToken] = useState('');\n\n    useEffect(() => {\n        if(props.apiURL === '') return;\n        fetch(props.apiURL + '/board/'+id, {\n            method: 'GET',\n            mode: 'cors'\n        }).then(res => res.json())\n        .then(res => {\n            if(typeof res !== 'undefined') {\n                setThreads(res.threads);\n                setBoard(res.board);\n            }\n        })\n    }, [props.apiURL, id]);\n\n    useEffect(() => {\n        if(localStorage.getItem('token') !== null) {\n            setToken(localStorage.getItem('token'));\n        }\n    }, []);\n\n    const submitThread = (e) => {\n        e.preventDefault();\n        if(props.apiURL === '' || board._id === '') return;\n\n        document.getElementById('createThreadModal')\n\n        let requestData = {\n            title: newThreadTitle,\n            comment: newThreadText,\n            boardid: board._id\n        }\n        fetch(props.apiURL+'/thread', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + token\n            },\n            body: JSON.stringify(requestData),\n            mode:'cors'\n        }).then(res => res.json())\n        .then(res => {\n            if(typeof res !== 'undefined') {\n                history.push('/thread/'+res.id);\n            }\n        })\n    }\n\n    return (\n        <div className='container'>\n            <div className='row mb-3'>\n                <div className='col-12 bg-light p-3'>\n                    {typeof board === 'undefined' ? <h1>Loading...</h1> : \n                    <div className='text-center'>\n                        <h1 >{board.name}</h1>\n                        <p>{board.description}</p>\n                        {props.loggedIn === true ? <button type=\"button\" className=\"btn btn-success\" data-bs-toggle=\"modal\" data-bs-target=\"#createThreadModal\">Create thread</button> : null}\n                    </div>}\n                    <hr/>\n                    {threads.length > 0 ? \n                    threads.map((value, index) => {\n                        return (\n                            <div key={value._id} className='lh-sm'>\n                                <Link to={'/thread/'+value._id} className='fs-3' style={{textDecoration:'none'}}>{value.title}</Link>\n                                \n                                {typeof value.author === 'undefined' ? <p className='mb-0'>Author: DELETED</p> : <p className='mb-0'>Author: {value.author.username}</p>}\n                                <p className='mb-0'>Posted: {DateTime.fromISO(value.date).toFormat('yyyy LLL dd')}</p>\n                                {index + 1 !== threads.length ? <hr/> : null}\n                            </div>\n                        )\n                    })\n                    : \n                    <p>No threads found</p>}\n                </div>\n            </div>\n\n\n            <div className=\"modal fade\" id=\"createThreadModal\" tabIndex=\"-1\" aria-labelledby=\"createThreadModalLabel\" aria-hidden=\"true\">\n                <div className=\"modal-dialog\">\n                    <div className=\"modal-content\">\n                    <div className=\"modal-header\">\n                        <h5 className=\"modal-title\" id=\"createThreadModalLabel\">Create Thread</h5>\n                        <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                    </div>\n                    <div className=\"modal-body\">\n                        <form>\n                            <div className=\"mb-3\">\n                                <label htmlFor=\"threadname\" className=\"form-label\">Title:</label>\n                                <input type=\"text\" className=\"form-control\" minLength='3' maxLength='50' id=\"threadname\" onChange={e=>setNewThreadTitle(e.target.value)} required/>\n                                </div>\n                                <div className=\"mb-3\">\n                                <label htmlFor=\"threadtextinput\" className=\"form-label\">Text (optional):</label>\n                                <textarea className=\"form-control\" id=\"threadtextinput\" max='10000' rows=\"4\" onChange={e => setNewThreadText(e.target.value)}></textarea>\n                            </div>\n                            <button type=\"button\" className=\"btn btn-primary\" onClick={e => submitThread(e)} data-bs-dismiss=\"modal\">Submit</button>\n                        </form>\n                    </div>\n                    <div className=\"modal-footer\">\n                        <button type=\"button\" className=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n                    </div>\n                    </div>\n                </div>\n            </div>\n\n\n\n\n\n\n\n        </div>\n    )\n}\n\nexport default Board;","import {useState, useEffect} from 'react';\nimport { useParams } from \"react-router-dom\";\nimport ChannelList from './channellist';\n\nconst Search = (props) => {\n    const [channels, setChannels] = useState([]);\n    const [totalChannels, setTotalChannels] = useState(0);\n    const [pages, setPages] = useState();\n    let {searchstring, startpos} = useParams();\n\n    useEffect(() => {\n        if(props.apiURL !== '' && searchstring !== '') {\n            let query = searchstring.split('_').join(' ');\n            document.title = query + ' | ASMRdb' \n            fetch(props.apiURL+'/channel/'+startpos+'/search?query='+query, {\n                method:'GET',\n                mode:'cors'\n            })\n            .then(res => res.json())\n            .then(res => {\n                setChannels(res.channels);\n                setTotalChannels(res.totalChannels);\n                \n                let estimatedPages = Math.ceil(res.totalchannels / 40.0);\n                if(estimatedPages <= 0) {\n                    setPages(1);\n                }\n                else {\n                    setPages(estimatedPages);\n                }\n            });\n        }\n    }, [props.apiURL, searchstring, startpos]);\n\n\n\n    return (\n        <ChannelList channels={channels} totalresults={totalChannels} title={'Search: ' + searchstring.split('-').join(' ')} pages={pages}/>\n    )\n\n}\n\nexport default Search;","import Login from './components/login';\nimport Channel from './components/channel';\nimport ChannelForm from './components/channelform';\nimport Channels from './components/channels';\nimport Register from './components/register';\nimport Home from './components/home';\nimport NavBar from './components/navbar';\nimport Tag from './components/tag';\nimport Tags from './components/tags';\nimport User from './components/user';\nimport Boards from './components/boards';\nimport Thread from './components/thread';\nimport Board from './components/board';\nimport Search from './components/search';\nimport { useEffect, useState } from \"react\";\nimport './styles/App.css';\n\nconst { HashRouter, Switch, Route } = require(\"react-router-dom\");\n\nfunction App() {\n  const [apiURL, setApiUrl] = useState('');\n  const [loggedIn, setLoggedIn] = useState(false);\n\n  const verifyToken = () => {\n    if(localStorage.getItem('token') === null) {\n      return;\n    }\n\n    fetch('https://dry-hollows-28901.herokuapp.com/user/verify',{\n      method:'GET', \n      headers: { 'Content-Type': 'application/json',\n      'Authorization' : 'Bearer ' + localStorage.getItem('token') },\n      mode:'cors'\n    })\n    .then(res => {\n      if(res.status === 403 || res.status === 401) {\n        localStorage.removeItem('token');\n        localStorage.removeItem('id');\n        setLoggedIn(false);\n      }\n      else {\n        setLoggedIn(true);\n      }\n    }) \n  }\n\n  function setLogin(status) {\n    if(status === false) {\n      localStorage.removeItem('token');\n      localStorage.removeItem('id');\n      setLoggedIn(false);\n    }\n    else {\n      setLoggedIn(true);\n    }\n  }\n\n  useEffect(() => {\n  }, [loggedIn])\n\n  useEffect(() => {\n      setApiUrl(\"https://dry-hollows-28901.herokuapp.com\");\n      verifyToken();\n  }, [])\n\n  useEffect(() => {\n  }, [apiURL])\n\n  return (\n    <div className=\"App\">\n      <HashRouter hashType={'slash'}>\n        <NavBar setLogin={setLogin} loggedIn={loggedIn} apiURL={apiURL === '' ? '' : apiURL}/>\n        <Switch>\n          <Route path='/' exact><Home apiURL={apiURL === '' ? '' : apiURL}/></Route>\n          <Route path='/channel/:id' exact><Channel loggedIn={loggedIn} apiURL={apiURL === '' ? '' : apiURL}/></Route>\n          <Route path='/add' exact><ChannelForm loggedIn={loggedIn} apiURL={apiURL === '' ? '' : apiURL}/></Route>\n          <Route path='/boards' exact><Boards loggedIn={loggedIn} apiURL={apiURL === '' ? '' : apiURL}/></Route>\n          <Route path='/board/:id' exact><Board loggedIn={loggedIn} apiURL={apiURL === '' ? '' : apiURL}/></Route>\n          <Route path='/thread/:id' exact><Thread loggedIn={loggedIn} apiURL={apiURL === '' ? '' : apiURL}/></Route>\n          <Route path='/user/:id' exact><User apiURL={apiURL === '' ? '' : apiURL}/></Route>\n          <Route path='/register' exact><Register loggedIn={loggedIn} apiURL={apiURL === '' ? '' : apiURL}/></Route>\n          <Route path='/tag/:id/:startpos' exact><Tag loggedIn={loggedIn} apiURL={apiURL === '' ? '' : apiURL}/></Route>\n          <Route path='/tags' exact><Tags loggedIn={loggedIn} apiURL={apiURL === '' ? '' : apiURL}/></Route>\n          <Route path='/login' exact><Login setLogin={setLogin} loggedIn={loggedIn} apiURL={apiURL}/></Route>\n          <Route path='/channels/:startpos' exact><Channels setLogin={setLogin} loggedIn={loggedIn} apiURL={apiURL}/></Route>   \n          <Route path='/search/:searchstring/:startpos' exact><Search apiURL={apiURL === '' ? '' : apiURL}/></Route>         \n        </Switch>\n      </HashRouter>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}